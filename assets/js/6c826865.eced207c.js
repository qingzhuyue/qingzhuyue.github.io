"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4742],{40:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/React\u9762\u8bd5\u9898","metadata":{"permalink":"/react/React\u9762\u8bd5\u9898","source":"@site/react/React\u9762\u8bd5\u9898.md","title":"React\u9762\u8bd5\u9898","description":"\x3c!--","date":"2024-02-18T13:40:16.000Z","formattedDate":"2024\u5e742\u670818\u65e5","tags":[],"readingTime":16.17,"hasTruncateMarker":false,"authors":[],"frontMatter":{},"nextItem":{"title":"react\u6e90\u7801\uff1a\u76ee\u5f55\u7ed3\u6784\u3001\u8c03\u8bd5\u6e90\u7801","permalink":"/react/react"}},"content":"\x3c!--\\n * @Author: qingzhuyue qingzhuyue@foxmail.com\\n * @Date: 2024-01-31 11:02:58\\n * @LastEditors: qingzhuyue qingzhuyue@foxmail.com\\n * @LastEditTime: 2024-04-01 21:43:33\\n * @FilePath: /blog/react/React\u9762\u8bd5\u9898.md\\n * @Description: \\n * Copyright (c) 2024 by ${qingzhuyue} email: ${qingzhuyue@foxmail.com}, All Rights Reserved.\\n--\x3e\\n\\n## 1\u3001\u5982\u4f55\u7406\u89e3React\uff1f\\n\\n\u4e00\u3001React\u7528\u6765\u6784\u5efa\u754c\u9762\u7684JavaScript\u5e93\uff0c\u5b83\u53ea\u63d0\u4f9b\u4e86UI\u5c42\u9762\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u9075\u5faa\u7ec4\u4ef6\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u58f0\u660e\u5f0f\u7f16\u7a0b\u89c4\u8303\u548c\u51fd\u6570\u5f0f\u7f16\u7a0b\u6982\u5ff5\u3002\u4e3a\u4e86\u8ba9\u524d\u7aef\u5e94\u7528\u7a0b\u5e8f\u66f4\u9ad8\u6548\uff0cReact\u4f7f\u7528\u4e86\u865a\u62dfDOM\u6765\u64cd\u4f5c\u771f\u5b9eDOM\u3002React\u9075\u5faa\u9ad8\u9636\u7ec4\u4ef6\u5230\u4f4e\u9636\u7ec4\u4ef6\u7684\u5355\u5411\u6570\u636e\u6d41\uff0c\u5e2e\u52a9\u6211\u4eec\u5c06\u9875\u9762\u5212\u5206\u4e3a\u591a\u4e2a\u72ec\u7acb\u7684\u5c0f\u6a21\u5757\uff0c\u6bcf\u4e00\u4e2a\u6a21\u5757\u5c31\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u4e4b\u95f4\u53ef\u4ee5\u7ec4\u5408\u3001\u5d4c\u5957\uff0c\u6784\u6210\u4e00\u4e2a\u6574\u4f53\u7684\u9875\u9762\u3002\\n\\nReact\u7c7b\u7ec4\u4ef6\u4f7f\u7528\u4e00\u4e2arender\u65b9\u6cd5\u63a5\u6536\u4f20\u5165\u7684\u6570\u636e\uff0c\u8fd4\u56de\u9700\u8981\u5c55\u793a\u7684\u5185\u5bb9\u3010\u51fd\u6570\u7ec4\u4ef6\u662f\u901a\u8fc7return\u8fd4\u56de\u9700\u8981\u5c55\u793a\u7684\u5185\u5bb9\u3011\\n\\n\\n\u4e8c\u3001React\u6709\u5f88\u591a\u7684\u7279\u6027\uff0c\u6bd4\u5982JSX\u8bed\u6cd5\u3001\u5355\u5411\u6570\u636e\u6d41\u3001\u865a\u62dfDOM\u3001\u58f0\u660e\u5f0f\u7f16\u7a0b\u3001Component\u3002\\n\\n### JSX\u8bed\u6cd5\\n\\nJSX\u8bed\u6cd5\uff0c\u662f\u4e00\u79cdJavaScript\u8bed\u6cd5\u6269\u5c55\uff0c\u5141\u8bb8\u5728JavaScript\u4ee3\u7801\u91cc\u9762\uff0c\u5199\u7c7b\u4f3c\u4e8eHTML\u4ee3\u7801\uff0c\u8fd9\u6837\u5728\u521b\u5efaReact\u7ec4\u4ef6\u66f4\u4e3a\u76f4\u89c2\u3001\u4fbf\u4e8e\u7406\u89e3\u3002\u6700\u540eBabel\u7f16\u8bd1\u5668\u4f1a\u628aJSX\u8f6c\u5316\u4e3a\u7eaf\u7cb9\u7684JavaScript\u4ee3\u7801\u3002\\n\\n### \u5355\u5411\u6570\u636e\u6d41\\nReact\u9075\u5faa\u6570\u636e\u5355\u5411\u6d41\u52a8\uff0c\u6709\u8fd9\u51e0\u4e2a\u539f\u56e0\uff1a\\n1. \u4e3a\u4e86\u8ba9\u7a0b\u5e8f\u7684\u7ed3\u6784\u66f4\u52a0\u6e05\u6670\u3001\u6613\u4e8e\u7406\u89e3\u548c\u8c03\u8bd5\uff1b\\n2. \u5355\u5411\u6570\u636e\u6d41\u4e2d\uff0c\u6570\u636e\u7684\u66f4\u65b0\u53ea\u4f1a\u662f\u4ece\u7236\u7ec4\u4ef6\u6d41\u5411\u5b50\u7ec4\u4ef6\uff0c\u8fd9\u6837\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u89c6\u56fe\u66f4\u65b0\u3002\\n\\n### React\u865a\u62dfDOM\\nReact\u7684\u865a\u62dfDON\u5c31\u662f\u4e00\u4e2aJavaScript\u5bf9\u8c61\uff0c\u901a\u8fc7\u5bf9\u8c61\u6765\u8868\u793aDOM\u7ed3\u6784\u3002\\n\\nReact\u91c7\u7528\u865a\u62dfDOM\u7684\u76ee\u7684\u662f\uff1a\\n1. \u63d0\u5347\u5f00\u53d1\u6548\u7387\uff1b\\n2. \u89e3\u51b3\u8de8\u5e73\u53f0\u7684\u95ee\u9898\uff0c\u4e00\u5957\u4ee3\u7801\u53ef\u4ee5\u8f6c\u5316\u4e3a\u591a\u4e2a\u5e73\u53f0\u5e94\u7528\u3002\\n\\n### React\u7684\u58f0\u660e\u5f0f\u7f16\u7a0b\\n\u5b83\u53ea\u5173\u6ce8\u4f60\u5728\u505a\u4ec0\u4e48\uff0c\u800c\u4e0d\u662f\u600e\u4e48\u505a\u3002\u5728\u4ee3\u7801\u5c42\u9762\u4e0a\u66f4\u7b80\u5355\u6613\u4e8e\u7ef4\u62a4\u3002\\n\\n### Component\u7ec4\u4ef6\u5316\\n\u5728React\u4e2d\uff0c\u4e00\u5207\u90fd\u53ef\u4ee5\u5f53\u6210\u72ec\u7acb\u7684\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u53ef\u4ee5\u662f\u51fd\u6570\u3001\u53ef\u4ee5\u662f\u7c7b\uff0c\u63a5\u53d7\u6570\u636e\u4f20\u5165\uff0c\u7136\u540e\u8fd4\u56de\u5728UI\u4e2d\u5c55\u793a\u7684React\u5143\u7d20\u3002\u6bd4\u5982\uff1a\\n\\n```js \\nconst Header = (props) => {\\n  return (<>\\n       <H1>{props.title}</H1>\\n  </>)\\n}\\n```\\n\\n```js\\nclass Header extends React.Component{\\n  constructor(props){\\n    super(props)\\n  }\\n  render(){\\n    return (<><H1>{this.props.title}</H1></>)\\n  }\\n}\\n```\\n\\n\u4e00\u4e2a\u7ec4\u4ef6\u5e94\u8be5\u5177\u6709\u7279\u6027\u5982\u4e0b\uff1a\\n\\n1. \u53ef\u4ee5\u7ec4\u5408\uff0c\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u4e0e\u5176\u4ed6\u7ec4\u4ef6\u4e00\u8d77\u4f7f\u7528\uff0c\u6216\u8005\u662f\u5d4c\u5957\u4f7f\u7528\uff1b\\n\\n2. \u53ef\u4ee5\u590d\u7528\uff0c\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\u90fd\u662f\u5177\u6709\u72ec\u7acb\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u573a\u666f\u4e0b\u4f7f\u7528\uff1b\\n\\n3. \u53ef\u4ee5\u7ef4\u62a4\uff0c\u7ec4\u4ef6\u53ea\u80fd\u5305\u542b\u81ea\u8eab\u7684\u903b\u8f91\uff0c\u8fd9\u6837\u66f4\u5bb9\u6613\u88ab\u7406\u89e3\u548c\u7ef4\u62a4\u3002\\n\\n\u6700\u540eReact\u7684\u4f18\u52bf\u5c31\u662f\uff1a\\n1. \u9ad8\u6548\u7075\u6d3b\\n2. \u58f0\u660e\u5f0f\u7684\u8bbe\u8ba1\uff0c\u7b80\u5355\u4f7f\u7528\\n3. \u7ec4\u4ef6\u5f0f\u5f00\u53d1\uff0c\u63d0\u9ad8\u4ee3\u7801\u590d\u7528\u7387\\n4. \u5355\u5411\u6570\u636e\u6d41\u66f4\u52a0\u5b89\u5168\u3002\\n\\n## 2\u3001\u5982\u4f55\u7406\u89e3state\u3001props\u3001super()\u548csuper(props)\\n\\n#### state\\n\u4e00\u4e2a\u7ec4\u4ef6\u9700\u8981\u663e\u793a\u4ec0\u4e48\uff0c\u600e\u4e48\u663e\u793a\u5185\u5bb9\uff0c\u90fd\u662f\u7531\u6570\u636e\u72b6\u6001\u548c\u5916\u90e8\u53c2\u6570\u51b3\u5b9a\u7684\u3002\\n\\nstate\u5c31\u662f\u8fd9\u4e2a\u6570\u636e\u72b6\u6001\u3002\\n\\n\u5f53\u9700\u8981\u4fee\u6539\u72b6\u6001\u503c\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u8c03\u7528setState\uff0c\u5b9e\u73b0\u66f4\u65b0\u7ec4\u4ef6\u5185\u90e8\u6570\u636e\u7684\u95ee\u9898\u3002\\n\\nsetState\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6709\u4e24\u79cd\u5f62\u5f0f\uff1a\u4e00\u79cd\u662f\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u91cc\u9762\u5305\u542b\u4e86\u9700\u8981\u66f4\u65b0\u7684\u72b6\u6001\u5b57\u6bb5\uff1b\u53e6\u4e00\u79cd\u662f\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u5f53\u524d\u72b6\u6001\u4f5c\u4e3a\u5165\u53c2\uff0c\u5e76\u4e14\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u6765\u66f4\u65b0\u7ec4\u4ef6\u7684\u72b6\u6001\u3002\\n\\nsetState\u8fd8\u53ef\u4ee5\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f1a\u5728setState\u8c03\u7528\u5b8c\u6210\u5e76\u4e14\u7ec4\u4ef6\u5f00\u59cb\u66f4\u65b0\u65f6\u88ab\u8c03\u7528\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u7528\u6765\u76d1\u542c\u6e32\u67d3\u662f\u5426\u5b8c\u6210\u3002\\n\\n#### props\\nReact\u7684\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u7ec4\u4ef6\u5316\uff0c\u9875\u9762\u88ab\u5207\u5206\u4e3a\u4e00\u4e9b\u72ec\u7acb\u7684\u3001\u53ef\u590d\u7528\u7684\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u6982\u5ff5\u4e0a\u5c31\u662f\u51fd\u6570\uff0c\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\u4f5c\u4e3a\u5165\u53c2\uff0c\u8fd9\u4e2a\u53c2\u6570\u5c31\u662fprops\uff0c\u7ec4\u4ef6\u5916\u90e8\u4f20\u5165\u7684\u6570\u636e\u90fd\u5728props\u4e0a\u3002\\n\\nstate\u548cprops\u90fd\u662f\u5bf9\u8c61\uff0c\u7528\u6765\u4fdd\u5b58\u4fe1\u606f\uff0cprops\u548cstate\u90fd\u80fd\u89e6\u53d1\u7ec4\u4ef6\u66f4\u65b0\u3002\\n\\n\u4e0d\u540c\u7684\u662f\uff1a\\n1. props\u662f\u7ec4\u4ef6\u5916\u90e8\u4f20\u5165\u7684\uff0c\u7136\u800cstate\u662f\u7ec4\u4ef6\u5185\u90e8\u81ea\u5df1\u7ba1\u7406\u7684\u3002\\n2. props\u5728\u7ec4\u5efa\u5185\u90e8\u4e0d\u53ef\u4fee\u6539\uff0c\u4f46\u662fstate\u53ef\u4ee5\u4fee\u6539\uff1b\\n\\n#### super()\\n\\n\u5728class\u7ee7\u627f\u7c7b\u7684\u65f6\u5019\uff0c\u901a\u8fc7super\u5173\u952e\u5b57\u6765\u6765\u5b9e\u73b0\u8c03\u7528\u7236\u7c7b\uff0csuper\u66ff\u4ee3\u7236\u7c7b\u7684\u6784\u5efa\u51fd\u6570\u3002\\n\\n\u4e3a\u4ec0\u4e48\u8981\u8c03\u7528super\u5462\uff0c\u56e0\u4e3a\u5b50\u7c7b\u662f\u6ca1\u6709\u81ea\u5df1\u7684this\u5bf9\u8c61\uff0c\u5b83\u53ea\u80fd\u901a\u8fc7\u7ee7\u627f\u7236\u7c7b\u7684this\uff0c\u7136\u540e\u5bf9\u5b83\u8fdb\u884c\u52a0\u5de5\u3002super\u65b9\u6cd5\u5c31\u662f\u5c06\u7236\u7c7b\u7684this\u7ee7\u627f\u7ed9\u5b50\u7c7b\u3002\u6ca1\u6709\u8c03\u7528super\uff0c\u5b50\u7c7b\u5c31\u5f97\u4e0d\u5230this\u5bf9\u8c61\uff0c\u90a3\u4e48\u4f7f\u7528this\u5c31\u4f1a\u62a5\u9519\u3002\\n\\n\\n\u5728React\u7684\u7c7b\u7ec4\u4ef6\u662f\u901a\u8fc7\u7ee7\u627fReact.Component\uff0c\u6240\u4ee5\u5728constructor\u6784\u9020\u51fd\u6570\u91cc\u9762\u8c03\u7528super\u65b9\u6cd5\u624d\u80fd\u521d\u59cb\u5316thi\u662f\u3002\\n\\n\u5982\u679csuper\u65b9\u6cd5\u6ca1\u6709\u4f20\u5165props\uff0c\u7c7b\u7ec4\u4ef6\u4f1a\u5728\u6784\u9020\u51fd\u6570\u751f\u6210\u5b9e\u4f8b\u540e\uff0c\u518d\u7ed9this.props\u8d4b\u503c\u3002\u6240\u4ee5\u6784\u9020\u51fd\u6570\u5185this.props\u4e3aundefined\u3002\\n\\n## 3\u3001React\u7ec4\u4ef6\u5982\u4f55\u901a\u4fe1\\n\u7ec4\u4ef6\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u6709\u56db\u79cd\u7c7b\u578b\uff1a\\n1. \u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\\n2. \u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u4f20\u9012\\n3. \u5144\u5f1f\u7ec4\u4ef6\u4e4b\u95f4\u4f20\u9012\\n\\n#### \u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\\n\\n\u7531\u4e8eReact\u6709\u5355\u5411\u6570\u636e\u6d41\u52a8\u7684\u7279\u6027\uff0c\u6240\u4ee5\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u662f\u6700\u5e38\u89c1\u7684\u65b9\u5f0f\u3002\\n\\n\u7236\u7ec4\u4ef6\u5728\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u5728\u7ec4\u4ef6\u6807\u7b7e\u5185\u4f20\u9012\u53c2\u6570\uff0c\u5b50\u7ec4\u4ef6\u901a\u8fc7props\u5c5e\u6027\u83b7\u53d6\u7236\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684\u53c2\u6570\u3002\\n\\n```js\\nfunction EmailInput(props){\\n  return (<label>\\n    <input value={props.email}/>\\n  </label>)\\n}\\n\\n<EmailInput email={\\"9999@qq.com\\"} />\\n```\\n\\n#### \u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u4f20\u9012\\n\\n\u7236\u7ec4\u4ef6\u5728\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\uff0c\u901a\u8fc7\u8fd9\u4e2a\u51fd\u6570\u7684\u56de\u8c03\u51fd\u6570\uff0c\u83b7\u53d6\u5b50\u7ec4\u4ef6\u4f20\u9012\u7684\u503c\u3002\\n\\n\u7236\u7ec4\u4ef6\uff1a\\n```js\\nclass Parent extends React.Component{\\n  constructor(props){\\n    super(props);\\n    this.state = {\\n      name:\'\';\\n    }\\n  }\\n\\n  getName = (name) => {\\n    this.setState({\\n      name\\n    })\\n  }\\n\\n  render(){\\n    return(<div>\\n      <p>name:{this.state.name}</p>\\n      <Child getName={(name)=>this.getName(name)}/>\\n    </div>)\\n  }\\n}\\n```\\n\\n\u5b50\u7ec4\u4ef6\uff1a\\n\\n```js\\nclass Child extends React.Component{\\nconstructor(props){\\n  super(props);\\n}\\n  render(){\\n    return (<div><button onClick={()=>this.props.getName(\\"000000\\")}>click</button></div>)\\n  }\\n}\\n```\\n\\n#### \u5144\u5f1f\u7ec4\u4ef6\u4e4b\u95f4\u901a\u4fe1\\n\\n\u5144\u5f1f\u7ec4\u4ef6\u4e4b\u95f4\u901a\u4fe1\uff0c\u901a\u8fc7\u7236\u7ec4\u4ef6\u4f5c\u4e3a\u4e2d\u95f4\u5c42\u6765\u5b9e\u73b0\u6570\u636e\u4e92\u901a\uff0c\u6bd4\u5982\uff1a\\n\\n```js\\nclass Parent extends React.Component{\\n  constructor(props){\\n    super(props);\\n    this.state = {\\n      count:0;\\n    }\\n  }\\nchangeCount = () =>{\\n  this.setState({count:this.state.count + 2})\\n}\\n  render(){\\n    return (<div>\\n      {/* \u7ec4\u4ef6A */}\\n      <CompA count={this.state.count} />\\n      <CompB onClick={this.changeCount} />\\n    </div>)\\n  }\\n}\\n```\\n\\n## 4\u3001\u4ec0\u4e48\u662f\u9ad8\u9636\u7ec4\u4ef6\uff0c\u6709\u54ea\u4e9b\u573a\u666f\uff1f\\n\\n\u9ad8\u9636\u51fd\u6570\u662f\u63a5\u6536\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u51fd\u6570\u4f5c\u4e3a\u5165\u53c2\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u3002\\n\\n\u9ad8\u9636\u7ec4\u4ef6\uff0c\u5219\u662f\u63a5\u6536\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u7ec4\u4ef7\u4f5c\u4e3a\u5165\u53c2\uff0c\u5e76\u4e14\u8fd4\u56de\u4e00\u4e2a\u7ec4\u4ef6\u3002\u9ad8\u9636\u7ec4\u4ef6\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u88c5\u9970\u8005\u8bbe\u8ba1\u6a21\u5f0f\u3002\\n\\n\u6700\u57fa\u672c\u7684\u9ad8\u9636\u7ec4\u4ef6\u6a21\u7248\u5982\u4e0b\uff1a\\n\\n```js\\nimport React form \'react\';\\n\\nexport default (WrappedComponent) => {\\n  return class EnhancedComponent extends React.Component{\\n    render(){\\n      return <WrappedComponent />\\n    }\\n  }\\n}\\n```\\n\\n\u901a\u8fc7\u4f20\u5165\u7684\u539f\u59cb\u7ec4\u4ef6WrappedComponent\uff0c\u505a\u4e00\u4e9b\u903b\u8f91\u5904\u7406\uff0c\u6bd4\u5982\u63d0\u53d6state\u7ed9\u539f\u59cb\u7ec4\u4ef6\u3002\u52a0\u5de5\u6210\u81ea\u5df1\u60f3\u8981\u7684\u7ec4\u4ef6EnhancedComponent\u3002\\n\\n\u628a\u901a\u7528\u7684\u903b\u8f91\u653e\u5728\u9ad8\u9636\u7ec4\u4ef6\u91cc\u9762\uff0c\u5bf9\u7ec4\u4ef6\u5b9e\u73b0\u4e00\u81f4\u7684\u5904\u7406\uff0c\u4ece\u800c\u5b9e\u73b0\u4ee3\u7801\u590d\u7528\u3002\\n\\n\u9ad8\u9636\u7ec4\u4ef6\u4e3b\u8981\u7684\u529f\u80fd\u662f\u5c01\u88c5\u5e76\u4e14\u5206\u79bb\u7ec4\u4ef6\u7684\u901a\u7528\u903b\u8f91\uff0c\u540c\u65f6\u8ba9\u903b\u8f91\u5728\u7ec4\u4ef6\u4e4b\u95f4\u66f4\u597d\u88ab\u590d\u7528\u3002\\n\\n\u4f46\u662f\u5728\u4f7f\u7528\u9ad8\u9636\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ce8\u610f\u4e00\u4e9b\u539f\u5219\uff1a\\n\\n1. props\u4fdd\u6301\u4e00\u81f4\uff1b\\n2. \u4e0d\u80fd\u5728\u65e0\u72b6\u6001\u7ec4\u4ef6\u4e0a\u4f7f\u7528ref\u5c5e\u6027\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u5b9e\u4f8b\uff1b\\n3. \u4e0d\u8981\u4ee5\u4efb\u4f55\u65b9\u5f0f\u6539\u53d8\u539f\u59cb\u7ec4\u4ef6\uff1b\\n4. \u4e0d\u8981\u5728render\u65b9\u6cd5\u5185\u4f7f\u7528\u9ad8\u9636\u7ec4\u4ef6\uff1b\\n5. \u4f7f\u7528compose\u7ec4\u5408\u9ad8\u9636\u7ec4\u4ef6\uff1b\\n\\n\u9ad8\u9636\u7ec4\u4ef6\u53ef\u4ee5\u4f20\u9012\u6240\u6709\u7684`props`\uff0c\u4f46\u662f\u4e0d\u80fd\u4f20\u9012`ref`\u3002\\n\\n\u5728\u5b9e\u9645\u7684\u5e94\u7528\u4e2d\uff0c\u9ad8\u9636\u7ec4\u4ef6\u4e00\u822c\u7528\u6765\u5c01\u88c5\u4e0e\u4e1a\u52a1\u65e0\u5173\uff0c\u4f46\u662f\u5728\u591a\u4e2a\u6a21\u5757\u4e2d\u4f7f\u7528\u7684\u529f\u80fd\uff0c\u6bd4\u5982\uff1a\u6743\u9650\u63a7\u5236\u3001\u65e5\u5fd7\u8bb0\u5f55\u3001\u6570\u636e\u6821\u9a8c\u3001\u5f02\u5e38\u5904\u7406\u3002\u7edf\u8ba1\u4e0a\u62a5\u7b49\u7b49\u3002\u6bd4\u5982\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u7528\u6237\u6570\u636e\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nimport React from \'react\';\\n\\nfunction withPersistentData(WrappedComponent) {\\n  return class extends React.Component{\\n    componentWillMount(){\\n      let data = localStorage.getItem(\\"data\\");\\n      this.setState({data})\\n    }\\n    render(){\\n      return <WrappedComponent {...this.props} data={this.state.data}/>\\n    }\\n  }\\n}\\n```\\n\\n\u4e1a\u52a1\u7ec4\u4ef6\u4ee3\u7801\uff1a\\n\\n```js\\nimport React from \\"react\\";\\nimport withPersistentData from \\"\u9ad8\u9636\u7ec4\u4ef6\u7684\u4f4d\u7f6e\\"\\n\\nclass MyComponent extends React.Component{\\n  render(){\\n    return <div>{this.props?.data}</div>\\n  }\\n}\\n\\n\\nexport default withPersistentData(MyComponent);\\n```\\n\\n\u5982\u679c\u60f3\u76d1\u542c\u7ec4\u4ef6\u7684\u6e32\u67d3\u6027\u80fd\uff0c\u53ef\u4ee5\u8fd9\u6837\u5c01\u88c5\uff1a\\n\\n```js\\nfunction withTiming(WrappedComponent){\\n  return class extends WrappedComponent{\\n    constructor(props){\\n      super(props);\\n      this.start = 0;\\n      this.end = 0;\\n    }\\n\\n    componentWillMount(){\\n      super.componentDidMount && super.componentWillMount();\\n      this.start = Date.now();\\n    }\\n\\n    componentDidMount(){\\n      super.componentDidMount && super.componentDidMount();\\n      this.end = Date.now();\\n      console.log(`${WrappedComponent.name} \u7ec4\u4ef6\u7684\u6e32\u67d3\u65f6\u95f4\u4e3a ${this.end - this.start} ms`)\\n    }\\n\\n    render(){\\n      return super.render();\\n    }\\n  }\\n}\\n```\\n\\n\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u8c03\u7528\u5373\u53ef\uff1a`withTiming(Home)`\\n\\n\u8fd9\u5c31\u662f\u9ad8\u9636\u7ec4\u4ef6\u7684\u4f5c\u7528\u3002\\n\\n\\n## 5\u3001React\u5e94\u7528\u4e2d\u5982\u4f55\u6355\u83b7\u9519\u8bef\\n\\n\u9519\u8bef\u662f\u6211\u4eec\u5728\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u7ecf\u5e38\u51fa\u73b0\u7684\u3002\u6bd4\u5982\u5728\u7f16\u5199React\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u5b58\u5728JavaScript\u4ee3\u7801\u9519\u8bef\u4f1a\u5bfc\u81f4React\u5185\u90e8\u72b6\u6001\u88ab\u7834\u574f\uff0c\u9020\u6210\u6574\u4e2a\u5e94\u7528\u5d29\u6e83\u3002\\n\\n\u4f5c\u4e3a\u4e00\u4e2a\u6846\u67b6\u6765\u8bf4\uff0cReact\u4e5f\u662f\u6709\u5bf9\u9519\u8bef\u7684\u5904\u7406\u89e3\u51b3\u65b9\u6848\u3002\\n\\nReact16\u6709\u4e00\u4e2a\u9519\u8bef\u8fb9\u754c\u7684\u6982\u5ff5\uff0c\u9519\u8bef\u8fb9\u754c\u5c31\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u6355\u83b7\u53d1\u751f\u5728\u5b50\u7ec4\u4ef6\u6811\u4e2d\u4efb\u4f55\u4f4d\u7f6e\u7684JavaScript\u9519\u8bef\uff0c\u5e76\u4e14\u6253\u5370\u8fd9\u4e9b\u9519\u8bef\u3002\u540c\u65f6\u4e5f\u53ef\u4ee5\u5c55\u793a\u9519\u8bef\u63d0\u793a\uff0c\u4e0d\u4f1a\u5c55\u793a\u53d1\u751f\u5d29\u6e83\u7684\u7ec4\u4ef6\u3002\\n\\n\u9519\u8bef\u8fb9\u754c\u5728\u6e32\u67d3\u671f\u95f4\uff0c\u751f\u547d\u5468\u671f\u65b9\u6cd5\u548c\u6574\u4e2a\u7ec4\u4ef6\u6811\u7684\u6784\u9020\u51fd\u6570\u4e2d\u6355\u83b7\u3002\\n\\n\u5728\u9519\u8bef\u8fb9\u754c\u7ec4\u4ef6\u4e2d\u7684\u4f7f\u7528\u4e24\u4e2a\u65b9\u6cd5\uff1a\\n\\n. static getDerivedStateFromError()\\n. componentDidCatch()\\n\\n\u7ec4\u4ef6\u629b\u51fa\u9519\u8bef\u4ee5\u540e\uff0c\u4f7f\u7528`static getDerivedStateFromError()`\u6e32\u67d3\u5907\u7528UI\uff0c\u4f7f\u7528`componentDidCatch()`\u6253\u5370\u9519\u8bef\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nclass ErrorBoundary extends React.Component{\\n  constructor(props){\\n    super(props);\\n    this.state = {\\n      hasError:false,\\n    }\\n  }\\n\\n  static getDerivedStateFromError(){\\n    return {hasError:true}\\n  }\\n\\n  componentDisCatch(error,errorInfo){\\n    // \u6253\u5370\u65e5\u5fd7\uff0c\u6216\u8005\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230\u670d\u52a1\u5668\\n\\n  }\\n\\n  render(){\\n    if(this.state.hasError){\\n      return <h2>\u53d1\u751f\u4e86\u4e00\u4e9b\u9519\u8bef</h2>\\n    }\\n\\n    return this.props.children\\n  }\\n}\\n```\\n\\n\u8ba9\u540e\u628a\u5e94\u7528\u7684\u5176\u4ed6\u7ec4\u4ef6\u4f5c\u4e3a\u9519\u8bef\u8fb9\u754c\u7684\u5b50\u7ec4\u4ef6\uff1a\\n\\n```js\\n<ErrorBoundary>\\n  <Widget/>\\n</ErrorBoundary>\\n```\\n\\nreact16\u4e4b\u540e\u7684\u7248\u672c\uff0c\u5c31\u628a\u6e32\u67d3\u671f\u95f4\u53d1\u751f\u7684\u6240\u6709\u9519\u8bef\u6253\u5370\u5230\u63a7\u5236\u53f0\u4e86\u3002\\n\\n\u5982\u679c\u6709\u4e00\u4e9b\u5f02\u5e38\uff0c\u5728\u9519\u8bef\u8fb9\u754c\u7ec4\u4ef6\u4e0d\u80fd\u6355\u83b7\u7684\uff0c\u6bd4\u5982\u4e8b\u4ef6\u5904\u7406\u7ed3\u679c\uff0c\u5f02\u6b65\u4ee3\u7801\u64cd\u4f5c\u7b49\u7b49\u3002\\n\\n\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528try...catch\u6765\u5b8c\u6210\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nclass Comp extends React.Component{\\n  constructor(props){\\n    super(props);\\n    this.state = {\\n      error:null\\n    }\\n  }\\n  handleClick = () =>{\\n    try{\\n\\n    }catch(error){\\n      this.setState({\\n        error\\n      })\\n    }\\n  }\\n  render(){\\n    return <div>\u7ec4\u4ef6\u5176\u4ed6\u5185\u5bb9</div>\\n  }\\n}\\n```\\n\\n\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u76d1\u542c`onerror`\u4e8b\u4ef6:\\n\\n```js\\nwindow.addEventListener(\'error\',function(event){\\n  // \u5176\u4ed6\u903b\u8f91\u5904\u7406\\n})\\n```\\n\\n\u8fd9\u5c31\u662fReact\u5f02\u5e38\u6355\u83b7\u7684\u89e3\u51b3\u601d\u8def\u3002\\n\\n## 6\u3001\u600e\u4e48\u7406\u89e3React refs\uff0c\u5728\u54ea\u4e9b\u573a\u666f\u4e0b\u4f7f\u7528\uff1f\\n\\n\\nReact\u7684refs\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u8ba9\u6211\u4eec\u8bbf\u95eeDOM\u8282\u70b9\u6216\u8005\u5728render\u65b9\u6cd5\u4e2d\u521b\u5efaReact\u5143\u7d20\u3002\\n\\n\u521b\u5efaref\u7684\u5f62\u5f0f\u6709\u4e09\u79cd\uff1a\\n\\n1. \u4f20\u5165\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u901a\u8fc7this.refs\u4f20\u5165\u7684\u5b57\u7b26\u4e32\u683c\u5f0f\u83b7\u53d6\u5bf9\u5e94\u7684\u5143\u7d20\\n2. \u4f20\u5165\u5bf9\u8c61\uff0c\u5bf9\u8c61\u662f\u901a\u8fc7React.createRef()\u65b9\u5f0f\u521b\u5efa\u7684\uff0c\u4f7f\u7528\u65f6\u53d6\u5230\u7684\u5bf9\u8c61\u5b58\u5728current\u5c5e\u6027\u4e0a\u3002\\n3. \u4f20\u5165\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5728DOM\u88ab\u6302\u8f7d\u65f6\u8fdb\u884c\u56de\u8c03\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u4f20\u5165\u4e00\u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u81ea\u5df1\u4fdd\u5b58\uff0c\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u62ff\u5230\u4e4b\u524d\u4fdd\u5b58\u7684\u5bf9\u8c61\u3002\\n4. \u4f20\u5165hook\uff0chook\u662f\u901a\u8fc7useRef()\u65b9\u5f0f\u6765\u521b\u5efa\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u901a\u8fc7\u751f\u6210hook\u5bf9\u8c61\u5c31\u662fcurrent\u5c5e\u6027\u4e0a\u7684\u5143\u7d20\u3002\\n\\n##  \u4f20\u5165\u5b57\u7b26\u4e32\\n\u53ea\u8981\u5728\u5bf9\u5e94\u7684\u7ec4\u4ef6\u6216\u8005\u5143\u7d20\u7684ref\u5c5e\u6027\u6dfb\u52a0\u5373\u53ef\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nimport React from \\"react\\";\\n\\nclass RefsComponent extends React.Component {\\n  constructor(props){\\n    super(props);\\n    this.myRef = React.createRef();\\n  }\\n\\n  componentDidMount(){\\n    this.refs.myRef.innerHTML = \'refs\u7684\u7528\u6cd5\'\\n  }\\n\\n  render() {\\n    return (\\n      <div ref=\'myRef\'></div>\\n    );\\n  }\\n}\\n\\nexport default RefsComponent;\\n```\\n\\n\u6548\u679c\u5982\u56fe\u6240\u793a\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/direct/bd7ebc7ff2d742a7a67b5df67cbc8c73.png)\\n## \u4f20\u5165\u4e00\u4e2a\u5bf9\u8c61\\n\u4f20\u5165\u7684\u5bf9\u8c61\u662f\u901a\u8fc7React.createRef\u65b9\u6cd5\u521b\u5efa\u7684\uff0c\u7136\u540e\u5c06ref\u5c5e\u6027\u6dfb\u52a0\u5230React\u5143\u7d20\u4e0a\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nimport React from \\"react\\";\\n\\nclass RefsComponent extends React.Component {\\n  constructor(props){\\n    super(props);\\n    this.myRef = React.createRef();\\n  }\\n\\n  componentDidMount(){\\n    console.log(this.myRef)\\n  }\\n\\n  render() {\\n    return (\\n      <div ref={this.myRef}>refs\u7684\u7528\u6cd5</div>\\n    );\\n  }\\n}\\n\\nexport default RefsComponent;\\n```\\n\\n\u6548\u679c\u5982\u56fe\u6240\u793a\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/direct/062163454e0a49be85a6065f34930a87.png)\\n\u4f1a\u5728current\u5c5e\u6027\u4e0a\u627e\u5230\u8282\u70b9\u7684\u76f8\u5173\u4fe1\u606f\u3002\\n\\n## \u4f20\u5165\u51fd\u6570\\n\u5f53ref\u4f20\u5165\u7684\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5728\u6e32\u67d3\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u4f20\u5165\u4e00\u4e2a\u5143\u7d20\u5bf9\u8c61\\n\uff0c\u7136\u540e\u901a\u8fc7\u5b9e\u4f8b\u628a\u5143\u7d20\u5bf9\u8c61\u4fdd\u5b58\u8d77\u6765\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nimport React from \\"react\\";\\n\\nclass RefsComponent extends React.Component {\\n  constructor(props) {\\n    super(props);\\n    this.myRef = React.createRef();\\n  }\\n\\n  componentDidMount() {\\n    console.log(this.myRef)\\n  }\\n\\n  render() {\\n    return (\\n      <div ref={(element) => { this.myRef = element }}>refs\u7684\u7528\u6cd5</div>\\n    );\\n  }\\n}\\n\\nexport default RefsComponent;\\n```\\n\u6253\u5370\u7684\u5143\u7d20\u5bf9\u8c61\u5982\u4e0b\u56fe\u6240\u793a\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/direct/52e90a7f5ae64c26b6d10d94a8e27532.png)\\n## \u4f20\u5165hook\\n\u901a\u8fc7useRef\u521b\u5efa\u4e00\u4e2aref\uff0c\u7136\u540e\u6dfb\u52a0\u5230React\u5143\u7d20\u4e0a\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction RefsComponent() {\\n  const myRef = React.useRef()\\n  console.log(myRef)\\n  return <div ref={myRef} />\\n}\\nexport default RefsComponent;\\n```\\n\u6548\u679c\u5982\u4e0b\u5982\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/direct/031205bb6de84020b52aaefa81037767.png)\\n\u5728\u8fd9\u51e0\u79cd\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u4f1a\u4f7f\u7528\u5230refs:\\n\\n1. \u5bf9DOM\u5143\u7d20\u7684\u7126\u70b9\u63a7\u5236\uff0c\u5185\u5bb9\u9009\u62e9\u548c\u63a7\u5236\\n2. \u5bf9DOM\u5143\u7d20\u7684\u5185\u5bb9\u8bbe\u7f6e\u4ee5\u53ca\u5a92\u4f53\u64ad\u653e\\n3. \u96c6\u6210\u7b2c\u4e09\u65b9DOM\u5e93\\n\\n\u8fd9\u5c31\u662frefs\u7684\u4f7f\u7528\u573a\u666f\u548c\u4f7f\u7528\u65b9\u6cd5\u3002"},{"id":"react","metadata":{"permalink":"/react/react","source":"@site/react/react.md","title":"react\u6e90\u7801\uff1a\u76ee\u5f55\u7ed3\u6784\u3001\u8c03\u8bd5\u6e90\u7801","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"React","permalink":"/react/tags/react"}],"readingTime":2.99,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":1,"slug":"react","title":"react\u6e90\u7801\uff1a\u76ee\u5f55\u7ed3\u6784\u3001\u8c03\u8bd5\u6e90\u7801","tags":["React"]},"prevItem":{"title":"React\u9762\u8bd5\u9898","permalink":"/react/React\u9762\u8bd5\u9898"},"nextItem":{"title":"React\u6e90\u7801\uff1aFiber\u7ed3\u6784","permalink":"/react/Fiber"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:06:15\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:06:17\\n * @FilePath: /blog/react/java.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\u6211\u7684\u6280\u672f\u6808\u662fReact\uff0c\u6700\u8fd1\u5728\u6574\u7406react\u7684\u6e90\u7801\uff0creact\u7248\u672c\u662f18.1.0\uff0c\u4e4b\u524d\u7248\u672c\uff0c\u6ca1\u6709\u770b\u8fc7\uff0c\u5c31\u6b64\u7565\u8fc7\u3002\\n\\n## \u6e90\u7801\u76ee\u5f55\\n\u4ecegithub\u5c06\u6e90\u7801\u4e0b\u8f7d\u540e\uff0c\u5148\u770b\u770b\u6e90\u7801\u76ee\u5f55\u7ed3\u6784\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/394be1618e9140038cab2ac9e57fcbf7.png)\\nfixtures\uff1a\u4ee3\u7801\u8d21\u732e\u8005\u63d0\u4f9b\u7684\u6d4b\u8bd5react\\npackage\uff1areact\u6e90\u7801\u7684\u4e3b\u8981\u90e8\u5206\uff0c\u5305\u542b\u4e86Schedule\u3001reconcile\u7b49\u7b49\\nscripts\uff1areact\u6784\u5efa\u76f8\u5173\\n\\n\u67e5\u9605\u6e90\u7801\uff0c\u6211\u4eec\u4e3b\u8981\u67e5\u9605package\u76ee\u5f55\u4e0b\u5373\u53ef\u3002package\u76ee\u5f55\u5982\u4e0b\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/05e19ab0cd8941369540bdb0d8db4bc4.png)\\nreact\uff1a\u6838\u5fc3\u7684API\uff0c\u6bd4\u5982\uff1aChildren,Component,Fragment,Profiler,PureComponent,StrictMode,Suspense\u7b49\u7b49\\n\\nreact-art\uff1acanvas\u3001svg\u7684\u6e32\u67d3\uff1b\\nreact-dom\uff1a\u6d4f\u89c8\u5668\u73af\u5883\uff1b\\nreact-native-renderer\uff1a\u539f\u751f\u5ba2\u6237\u7aef\u76f8\u5173\u7684\uff1b\\nreact-noop-renderer\uff1a\u8c03\u8bd5\u6216\u8005fiber\uff1b\\nreact-server\uff1assr\u76f8\u5173\uff1b\\nreact-fetch\uff1a\u8bf7\u6c42\u76f8\u5173\uff1b\\nreact-interactions\uff1a\u548c\u4e8b\u4ef6\u76f8\u5173\uff0c\u6bd4\u5982\u70b9\u51fb\u4e8b\u4ef6\uff1b\\nreact-reconciler\uff1a\u6784\u5efa\u8282\u70b9\uff1b\\nshared\uff1a\u5305\u542b\u516c\u5171\u65b9\u6cd5\u548c\u53d8\u91cf\uff1b\\nreact-is\uff1a\u5224\u65ad\u7c7b\u578b\uff1b\\nreact-client\uff1a\u6d41\u76f8\u5173\uff1b\\nreact-refresh\uff1a\u70ed\u52a0\u8f7d\u76f8\u5173\\nscheduler\uff1a\u8c03\u5ea6\u5668\u76f8\u5173\\n\\n## \u6838\u5fc3API\\n\u4ecereact\u76ee\u5f55\u7684index.js\u4e2d\u627e\u5230React\u66b4\u9732\u51fa\u6765\u7684API\uff1a\\n\\n```javascript\\nexport {\\n  __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,\\n  act as unstable_act,\\n  Children,\\n  Component,\\n  Fragment,\\n  Profiler,\\n  PureComponent,\\n  StrictMode,\\n  Suspense,\\n  SuspenseList,\\n  cloneElement,\\n  createContext,\\n  createElement,\\n  createFactory,\\n  createMutableSource,\\n  createRef,\\n  createServerContext,\\n  forwardRef,\\n  isValidElement,\\n  lazy,\\n  memo,\\n  startTransition,\\n  unstable_Cache,\\n  unstable_DebugTracingMode,\\n  unstable_LegacyHidden,\\n  unstable_Offscreen,\\n  unstable_Scope,\\n  unstable_TracingMarker,\\n  unstable_getCacheSignal,\\n  unstable_getCacheForType,\\n  unstable_useCacheRefresh,\\n  useId,\\n  useCallback,\\n  useContext,\\n  useDebugValue,\\n  useDeferredValue,\\n  useEffect,\\n  useImperativeHandle,\\n  useInsertionEffect,\\n  useLayoutEffect,\\n  useMemo,\\n  useMutableSource,\\n  useSyncExternalStore,\\n  useReducer,\\n  useRef,\\n  useState,\\n  useTransition,\\n  version,\\n} from \'./src/React\';\\n```\\n\\n\u662f\u5426\u627e\u5230\u81ea\u5df1\u5e38\u7528\u7684API\u5462\uff1f\u6bd4\u5982Children\u3001memo\u3001useRef\u7b49\u7b49\u3002\\n\\n## \u8c03\u8bd5\u6e90\u7801\\n\\n\u5982\u679c\u60f3\u81ea\u5df1\u8c03\u8bd5\u6e90\u7801\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u5148\u5b89\u88c5\u4f9d\u8d56\uff1a`yarn`\u6216\u8005`npm install`\uff0c\\n\\nbuild\u6e90\u7801\uff1a`npm run build react/index,react/jsx,react-dom/index,scheduler --type=NODE`\\n\\n\u7ed9\u6e90\u7801\u521b\u5efa\u8f6f\u94fe\uff1a\\n\u5207\u6362\u5230build/node_modules/react\uff0c\u6267\u884c\u547d\u4ee4\uff1a`npm  link`\\n\u5207\u6362\u5230build/node_modules/react-dom\uff0c\u6267\u884c\u547d\u4ee4\uff1a`npm  link `\\n\\n\u4f7f\u7528create-react-app\u811a\u624b\u67b6\u521b\u5efa\u9879\u76ee\uff1a\\n\\n```javascript\\nnpx create-react-app demo\\nnpm link react react-dom\\n```\\n\u4f7f\u7528\u521b\u5efa\u9879\u76ee\u65f6\u5019\u3002\u9ed8\u8ba4\u662f\u5b89\u88c5\u4e86react\u7684\u6700\u65b0\u7248\u672c\uff0c\u4ecepackage.json\u6587\u4ef6\u4e2d\u53ef\u4ee5\u770b\u51fa\uff1a\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/1dbece946e394b8bbc5700276614f40f.png)\\n\u6267\u884c`npm link react react-dom`\u540e\uff0c\u5728\u4f9d\u8d56\u6587\u4ef6\u5939\u4e0b\u627e\u5230react\u76ee\u5f55\uff0c\u67e5\u770breact\u7684\u5b9e\u9645\u7248\u672c\u3002\\n\\n\u67e5\u770b\u8be5\u9879\u76ee\u4e0breact\u7684\u7248\u672c\uff0c\u53ef\u4ee5\u4eceversion\u5f97\u5230\uff0c\u56e0\u4e3aversion\u662freact\u66b4\u9732\u51fa\u6765\u7684API\uff0c\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff1a\\n\\n```javascript\\nimport { version } from \'react\';\\nimport logo from \'./logo.svg\';\\nimport \'./App.css\';\\n\\nfunction App() {\\n  return (\\n    <div className=\\"App\\">\\n      <header className=\\"App-header\\">\\n        <img src={logo} className=\\"App-logo\\" alt=\\"logo\\" />\\n        <p>\\n          Edit <code>src/App.js</code> and save to reload.\\n        </p>\\n        <a\\n          className=\\"App-link\\"\\n          href=\\"https://reactjs.org\\"\\n          target=\\"_blank\\"\\n          rel=\\"noopener noreferrer\\"\\n        >\\n          Learn React\\n        </a>\\n        <p>React:\u7248\u672c{version}</p>\\n      </header>\\n    </div>\\n  );\\n}\\n\\nexport default App;\\n\\n```\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/8f6b5eee55fd40e5835b6a439b869680.png)"},{"id":"Fiber","metadata":{"permalink":"/react/Fiber","source":"@site/react/react202302.md","title":"React\u6e90\u7801\uff1aFiber\u7ed3\u6784","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"React","permalink":"/react/tags/react"}],"readingTime":7.345,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":2,"slug":"Fiber","title":"React\u6e90\u7801\uff1aFiber\u7ed3\u6784","tags":["React"]},"prevItem":{"title":"react\u6e90\u7801\uff1a\u76ee\u5f55\u7ed3\u6784\u3001\u8c03\u8bd5\u6e90\u7801","permalink":"/react/react"},"nextItem":{"title":"React\uff1a\u6570\u636e\u6d41","permalink":"/react/React\uff1a\u6570\u636e\u6d41"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:07:15\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:29:27\\n * @FilePath: /blog/react/react202302.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\nreact15\u7684\u534f\u8c03\u3010reconcile\u3011\u8fc7\u7a0b\u662f\u4e0d\u80fd\u6253\u65ad\u7684\uff0c\u90a3\u4e48\u5728\u8fdb\u884c\u5927\u91cf\u8282\u70b9\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u9020\u6210\u5361\u987f\uff0c\u56e0\u4e3a\u6d4f\u89c8\u5668\u6240\u6709\u7684\u65f6\u95f4\u90fd\u7528\u6765\u6267\u884cjs\uff0c\u800cjs\u7684\u6267\u884c\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u6240\u4ee5\u5728\u534f\u8c03\u8fc7\u7a0b\u4e2d\u5c31\u4f1a\u5361\u987f\u3002\\n\\nreact16\u4e4b\u540e\uff0c\u6dfb\u52a0schedule\u8fc7\u7a0b\uff0c\u4e5f\u5c31\u662f\u8c03\u5ea6\u8fc7\u7a0b\uff0c\u7ed9\u6bcf\u4e00\u4e2a\u5de5\u4f5c\u5355\u5143\u4e00\u5b9a\u7684\u65f6\u95f4\uff0c\u5728\u8fd9\u4e2a\u65f6\u95f4\u5185\u6ca1\u6709\u6267\u884c\u5b8c\u6210\u7684\uff0c\u5c31\u6682\u65f6\u8df3\u51fa\u6765\u3002\u90a3\u4e48\u5f02\u6b65\u4e2d\u65ad\u7684\u66f4\u65b0\u9700\u8981\u4e00\u5b9a\u7684\u6570\u636e\u7ed3\u6784\u6765\u5b58\u50a8\u5de5\u4f5c\u5355\u5143\u7684\u4fe1\u606f\uff0c\u8fd9\u5c31\u662fFiber\u3002\\n\\nFiber\u7684\u4f5c\u7528\uff1a\\n\\n1. \u4f5c\u4e3a\u5de5\u4f5c\u5355\u5143\uff0c\u5b58\u50a8\u4e86\u8282\u70b9\u4fe1\u606f\u4ee5\u53ca\u8282\u70b9\u7684\u4f18\u5148\u7ea7\uff0c\u8fd9\u4e9b\u8282\u70b9\u901a\u8fc7\u6307\u9488\u5f62\u5f0f\u6784\u6210\u4e86Fiber\u6811\uff1b\\n2. \u589e\u91cf\u6e32\u67d3\u66f4\u65b0\uff0c\u901a\u8fc7jsx\u5bf9\u8c61\u548ccurrentFiber\u5bf9\u6bd4\uff0c\u627e\u51fa\u5dee\u5f02\uff0c\u5e76\u4e14\u5e94\u7528\u5230\u771f\u5b9eDOM\u4e0a\u53bb\\n3. \u6839\u636e\u8282\u70b9\u7684\u4f18\u5148\u7ea7\u6682\u505c\u3001\u7ee7\u7eed\u3001\u6392\u5e8f\u4f18\u5148\u7ea7\uff1a\u56e0\u4e3aFiber\u4e0a\u5b58\u6709\u4f18\u5148\u7ea7\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u8282\u70b9\u7684\u4f18\u5148\u7ea7\u7684\u5bf9\u6bd4\uff0c\u6765\u5b8c\u6210\u4efb\u52a1\u7684\u6682\u505c\u3001\u7ee7\u7eed\u3001\u6392\u5217\u4f18\u5148\u7ea7\uff0c\u4e3a\u4e0a\u5c42\u5b9e\u73b0\u6279\u91cf\u66f4\u65b0\u3001Suspense\u63d0\u4f9b\u57fa\u7840\uff1b\\n4. \u4fdd\u5b58\u72b6\u6001\uff1aFiber\u4e0a\u6709\u72b6\u6001\u548c\u66f4\u65b0\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u51fd\u6570\u7ec4\u4ef6\u7684\u72b6\u6001\u66f4\u65b0\uff0c\u8fd9\u5c31\u662fhooks\u3002\\n\\n## Fiber\u7ed3\u6784\\n\\n```javascript\\nfunction FiberNode(\\n  tag: WorkTag,\\n  pendingProps: mixed, \\n  key: null | string, \\n  mode: TypeOfMode, \\n) {\\n  // \u5b9e\u4f8b\\n  this.tag = tag; // \u6807\u8bb0\u4e0d\u540c\u7684\u7ec4\u4ef6\u7c7b\u578b\\n  this.key = key; // reactElement\u7684key\uff0c\u4e5f\u5c31\u662fkey\u5c5e\u6027\\n  this.elementType = null; // \u5143\u7d20\u7c7b\u578b\uff0c\u662fcreateElement\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\\n  this.type = null; // \u5f02\u6b65\u7ec4\u4ef6resolve\u8fd4\u56de\u7684\u5185\u5bb9\uff0c\u662ffunction\u6216\u8005class\\n  this.stateNode = null; // \u771f\u5b9edom\u8282\u70b9\\n\\n  // Fiber\u6811\u7684\u7ed3\u6784\\n  this.return = null; // \u6307\u5411\u7236\u8282\u70b9\uff0c\u5904\u7406\u5b8c\u8be5\u8282\u70b9\u540e\uff0c\u5411\u4e0a\u8fd4\u56de\\n  this.child = null; // \u6307\u5411child\\n  this.sibling = null; // \u6307\u5411\u5144\u5f1f\u8282\u70b9\\n  this.index = 0;\\n\\n  this.ref = null; // ref\u5c5e\u6027\\n\\n  this.pendingProps = pendingProps; // \u65b0\u53d8\u52a8\u5e26\u6765\u65b0\u7684props\\n  this.memoizedProps = null; // \u4e0a\u6b21\u6e32\u67d3\u540e\u7684props\\n  this.updateQueue = null; // \u66f4\u65b0\u961f\u5217\u5b58\u653e\u7ec4\u4ef6\u4ea7\u751f\u7684update\\n  this.memoizedState = null; // \u4e0a\u6b21\u6e32\u67d3\u7684state\\n  this.dependencies = null; // \\n\\n  this.mode = mode; // \\n\\n  // Effects\\n  this.flags = NoFlags;\\n  this.subtreeFlags = NoFlags;\\n  this.deletions = null;\\n\\n  //\u4f18\u5148\u7ea7\\n  this.lanes = NoLanes;\\n  this.childLanes = NoLanes;\\n  // current\u548cworkInProgress\u7684\u6307\u9488\\n  this.alternate = null;\\n\\n  // \u542f\u52a8\u5206\u6790\u5668\u65f6\u95f4\\n  if (enableProfilerTimer) {\\n    this.actualDuration = Number.NaN; // \u5b9e\u9645\u6301\u7eed\u65f6\u95f4\\n    this.actualStartTime = Number.NaN; // \u5b9e\u9645\u5f00\u59cb\u65f6\u95f4\\n    this.selfBaseDuration = Number.NaN; // \\n    this.treeBaseDuration = Number.NaN;\\n\\n    this.actualDuration = 0;\\n    this.actualStartTime = -1;\\n    this.selfBaseDuration = 0;\\n    this.treeBaseDuration = 0;\\n  }\\n\\n  if (__DEV__) {\\n    // This isn\'t directly used but is handy for debugging internals:\\n\\n    this._debugSource = null;\\n    this._debugOwner = null;\\n    this._debugNeedsRemount = false;\\n    this._debugHookTypes = null;\\n    if (!hasBadMapPolyfill && typeof Object.preventExtensions === \'function\') {\\n      Object.preventExtensions(this);\\n    }\\n  }\\n}\\n```\\n\u8fd9\u5c31\u662fFiber\u7684\u7ed3\u6784\u3002\\n\\n## \u521b\u5efaFiberRoot\u548crootFiber\\n\\nFiber\u4fdd\u5b58\u7684\u662fdom\u8282\u70b9\u4fe1\u606f\uff0c\u5f53\u524ddom\u5bf9\u5e94\u7684Fiber\u6811\u662fcurrent Fiber\uff0c\u6b63\u5728\u6784\u5efa\u7684Fiber\u6811\u662fworkInProgress Fiber\uff0c\u5b83\u662f\u5728createWorkInProgress\u4e2d\u5b8c\u6210\u3002\\n\\n\u9996\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u4f1a\u521b\u5efafiberRootNode\u548crootFiber\uff0cfiberRootNode\u662f\u5e94\u7528\u7684\u6839\u8282\u70b9\uff0crootFiber\u662f\uff0c\u4e4b\u540e\u6839\u636ejsx\u5bf9\u8c61\u521b\u5efaFiber\u8282\u70b9\uff0cFiber\u8282\u70b9\u8fde\u63a5\u5f62\u6210Fiber\u6811\u3002\\n\\n\u5148\u521b\u5efafiberRoot\uff0c\u5728ReactFiberRoot.old.js\u4e2d\u627e\u5230createFiberRoot\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c31\u662f\u521b\u5efaFiberRoot\uff0c\u6e90\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction createFiberRoot(\\n  containerInfo: any,\\n  tag: RootTag,\\n  hydrate: boolean,\\n  initialChildren: ReactNodeList,\\n  hydrationCallbacks: null | SuspenseHydrationCallbacks,\\n  isStrictMode: boolean,\\n  concurrentUpdatesByDefaultOverride: null | boolean,\\n  identifierPrefix: string,\\n  onRecoverableError: null | ((error: mixed) => void),\\n  transitionCallbacks: null | TransitionTracingCallbacks,\\n): FiberRoot {\\n  console.log(\\"\u521b\u5efaFiberRootNode\u8282\u70b9\\")\\n  const root: FiberRoot = (new FiberRootNode(\\n    containerInfo,\\n    tag,\\n    hydrate,\\n    identifierPrefix,\\n    onRecoverableError,\\n  ): any);\\n  if (enableSuspenseCallback) {\\n    root.hydrationCallbacks = hydrationCallbacks;\\n  }\\n\\n  if (enableTransitionTracing) {\\n    root.transitionCallbacks = transitionCallbacks;\\n  }\\n\\n  const uninitializedFiber = createHostRootFiber(\\n    tag,\\n    isStrictMode,\\n    concurrentUpdatesByDefaultOverride,\\n  );\\n  root.current = uninitializedFiber;\\n  uninitializedFiber.stateNode = root;\\n\\n  if (enableCache) {\\n    const initialCache = createCache();\\n    retainCache(initialCache);\\n\\n    root.pooledCache = initialCache;\\n    retainCache(initialCache);\\n    const initialState: RootState = {\\n      element: initialChildren,\\n      isDehydrated: hydrate,\\n      cache: initialCache,\\n      transitions: null,\\n      pendingSuspenseBoundaries: null,\\n    };\\n    uninitializedFiber.memoizedState = initialState;\\n  } else {\\n    const initialState: RootState = {\\n      element: initialChildren,\\n      isDehydrated: hydrate,\\n      cache: (null: any), // not enabled yet\\n      transitions: null,\\n      pendingSuspenseBoundaries: null,\\n    };\\n    uninitializedFiber.memoizedState = initialState;\\n  }\\n\\n  initializeUpdateQueue(uninitializedFiber);\\n\\n  return root;\\n}\\n```\\n\\n\u91cc\u9762\u7684createHostRootFiber\u65b9\u6cd5\uff0c\u662f\u521b\u5efarootFiber\u7684\u3002\u5728react\u7684\u5165\u53e3\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u8c03\u7528\u7684\u662fReactDOM\u7684createRoot\u65b9\u6cd5\u3002\u8fd9\u662freact\u5e94\u7528\u9ed8\u8ba4\u7684\u5165\u53e3\u4ee3\u7801\uff1a\\n\\n```javascript\\nimport React from \'react\';\\nimport ReactDOM from \'react-dom/client\';\\nimport \'./index.css\';\\nimport App from \'./App\';\\nimport reportWebVitals from \'./reportWebVitals\';\\n\\nconst root = ReactDOM.createRoot(document.getElementById(\'root\'));\\nroot.render(\\n  <React.StrictMode>\\n    <App />\\n  </React.StrictMode>\\n);\\nreportWebVitals();\\n```\\n\\n\u5728createRoot\u65b9\u6cd5\u4e2d\uff0c\u662f\u901a\u8fc7createContainer\u65b9\u6cd5\u6765\u521b\u5efaroot\u7684\uff0c\u6e90\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction createRoot(\\n  container: Element | Document | DocumentFragment,\\n  options?: CreateRootOptions,\\n): RootType {\\n  // \u5176\u4ed6\u4ee3\u7801\u7701\u7565\\n  const root = createContainer(\\n    container,\\n    ConcurrentRoot,\\n    null,\\n    isStrictMode,\\n    concurrentUpdatesByDefaultOverride,\\n    identifierPrefix,\\n    onRecoverableError,\\n    transitionCallbacks,\\n  );\\n // \u5176\u4ed6\u4ee3\u7801\u7701\u7565\\n  return new ReactDOMRoot(root);\\n}\\n```\\n\\n\u518d\u6765\u770b\u770bcreateContainer\u7684\u6e90\u7801\uff1a\\n\\n```javascript\\nexport function createContainer(\\n  containerInfo: Container,\\n  tag: RootTag,\\n  hydrationCallbacks: null | SuspenseHydrationCallbacks,\\n  isStrictMode: boolean,\\n  concurrentUpdatesByDefaultOverride: null | boolean,\\n  identifierPrefix: string,\\n  onRecoverableError: (error: mixed) => void,\\n  transitionCallbacks: null | TransitionTracingCallbacks,\\n): OpaqueRoot {\\n  const hydrate = false;\\n  const initialChildren = null;\\n  return createFiberRoot(\\n    containerInfo,\\n    tag,\\n    hydrate,\\n    initialChildren,\\n    hydrationCallbacks,\\n    isStrictMode,\\n    concurrentUpdatesByDefaultOverride,\\n    identifierPrefix,\\n    onRecoverableError,\\n    transitionCallbacks,\\n  );\\n}\\n```\\n\\n\u8fd9\u5c31Fiber\u6700\u5f00\u59cb\u521b\u5efa\u6d41\u7a0b\u3002\\n\\n## \u521b\u5efaworkInProgress Fiber\\n\\nworkInProgress Fiber\uff0c\u662f\u7ec4\u4ef6\u53d1\u751f\u66f4\u65b0\u65f6\uff0c\u751f\u6210\u65b0\u7684jsx\u548ccurrent Fiber\u6811\u8fdb\u884c\u5bf9\u6bd4\u3010diff\u7b97\u6cd5\u3011\u540e\uff0c\u751f\u6210workInProgress Fiber\uff0c\u7136\u540eFiberRoot\u7684current\u6307\u5411workInProgress Fiber\uff0c\u90a3\u4e48workInProgress Fiber\u5c31\u53d8\u6210\u7684current Fiber\uff0c\u4ece\u800c\u5b8c\u6210\u66f4\u65b0\u3002\u5b8c\u6574\u6e90\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nexport function createWorkInProgress(current: Fiber, pendingProps: any): Fiber {\\n  let workInProgress = current.alternate;\\n  if (workInProgress === null) { // \u662f\u5426\u662f\u9996\u6b21\u6e32\u67d3\u8fd8\u662f\u66f4\u65b0\u9636\u6bb5\\n    workInProgress = createFiber(\\n      current.tag,\\n      pendingProps,\\n      current.key,\\n      current.mode,\\n    );\\n    workInProgress.elementType = current.elementType;\\n    workInProgress.type = current.type;\\n    workInProgress.stateNode = current.stateNode;\\n\\n    if (__DEV__) {\\n      // DEV-only fields\\n\\n      workInProgress._debugSource = current._debugSource;\\n      workInProgress._debugOwner = current._debugOwner;\\n      workInProgress._debugHookTypes = current._debugHookTypes;\\n    }\\n\\n    workInProgress.alternate = current;\\n    current.alternate = workInProgress;\\n  } else {\\n    workInProgress.pendingProps = pendingProps; // \u590d\u7528\u5c5e\u6027\\n    // Needed because Blocks store data on type.\\n    workInProgress.type = current.type;\\n    \\n    workInProgress.flags = NoFlags;\\n\\n    // The effects are no longer valid.\\n    workInProgress.subtreeFlags = NoFlags;\\n    workInProgress.deletions = null;\\n\\n    if (enableProfilerTimer) {\\n      workInProgress.actualDuration = 0;\\n      workInProgress.actualStartTime = -1;\\n    }\\n  }\\n\\n  workInProgress.flags = current.flags & StaticMask;\\n  workInProgress.childLanes = current.childLanes;\\n  workInProgress.lanes = current.lanes;\\n\\n  workInProgress.child = current.child;\\n  workInProgress.memoizedProps = current.memoizedProps;\\n  workInProgress.memoizedState = current.memoizedState;\\n  workInProgress.updateQueue = current.updateQueue;\\n\\n  const currentDependencies = current.dependencies;\\n  workInProgress.dependencies =\\n    currentDependencies === null\\n      ? null\\n      : {\\n          lanes: currentDependencies.lanes,\\n          firstContext: currentDependencies.firstContext,\\n        };\\n\\n  // These will be overridden during the parent\'s reconciliation\\n  workInProgress.sibling = current.sibling;\\n  workInProgress.index = current.index;\\n  workInProgress.ref = current.ref;\\n\\n  if (enableProfilerTimer) {\\n    workInProgress.selfBaseDuration = current.selfBaseDuration;\\n    workInProgress.treeBaseDuration = current.treeBaseDuration;\\n  }\\n\\n  if (__DEV__) {\\n    workInProgress._debugNeedsRemount = current._debugNeedsRemount;\\n    switch (workInProgress.tag) {\\n      case IndeterminateComponent:\\n      case FunctionComponent:\\n      case SimpleMemoComponent:\\n        workInProgress.type = resolveFunctionForHotReloading(current.type);\\n        break;\\n      case ClassComponent:\\n        workInProgress.type = resolveClassForHotReloading(current.type);\\n        break;\\n      case ForwardRef:\\n        workInProgress.type = resolveForwardRefForHotReloading(current.type);\\n        break;\\n      default:\\n        break;\\n    }\\n  }\\n\\n  return workInProgress;\\n}\\n```\\n\\n\u8fd9\u5c31\u662fFiber\u6570\u636e\u7ed3\u6784\u5b8c\u6574\u6d41\u7a0b"},{"id":"React\uff1a\u6570\u636e\u6d41","metadata":{"permalink":"/react/React\uff1a\u6570\u636e\u6d41","source":"@site/react/react202303.md","title":"React\uff1a\u6570\u636e\u6d41","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":11.175,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":3,"slug":"React\uff1a\u6570\u636e\u6d41","title":"React\uff1a\u6570\u636e\u6d41","tags":["react"]},"prevItem":{"title":"React\u6e90\u7801\uff1aFiber\u7ed3\u6784","permalink":"/react/Fiber"},"nextItem":{"title":"React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","permalink":"/react/React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:08:58\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:08:59\\n * @FilePath: /blog/react/react202303.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\n## props\u548cState\\n\\n\u7ec4\u4ef6\u7684props\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u7ec4\u4ef6\u7684\u53c2\u6570\uff0c\u7ec4\u4ef6\u63a5\u6536\u53c2\u6570\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u7528\u6765\u63cf\u8ff0\u9875\u9762\u5185\u5bb9\u7684\u865a\u62dfDOM\u3002\\n\\n\u865a\u62dfDOM\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u63cf\u8ff0\u771f\u5b9eDOM\u7684\uff0c\u90a3\u4e48\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u662f\u4f7f\u7528JSX\u6765\u5b8c\u6210\u865a\u62dfDOM\u7684\u6784\u5efa\u3002\u6bd4\u5982\uff1a\\n\\n```javascript\\nimport React from \\"react\\";\\nclass Comm extends React.Component {\\n\\n   \\n    componentDidMount() {\\n        console.log(\'componentDidMount\')\\n    }\\n\\n    shouldComponentUpdate() {\\n        console.log(\\"shouldComponentUpdate\\")\\n        return true\\n    }\\n    componentDidUpdate() {\\n        console.log(\\"componentDidUpdate\\")\\n    }\\n    componentWillUnmount() {\\n        console.log(\\"componentWillUnmount\\")\\n    }\\n    changeText() {\\n        this.setState({\\n            text: new Date().getTime()\\n        })\\n    }\\n    render() {\\n        return <React.Fragment>\\n            <button onClick={this.changeText}>\u6309\u94ae</button>\\n        </React.Fragment>\\n    }\\n}\\n\\nexport default Comm;\\n```\\n\\n\u5728React\u7ec4\u4ef7\u4e2d\uff0cProps\u53ef\u4ee5\u662f\u4ece\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u3002\u8fd9\u4e2a\u5f88\u597d\u7406\u89e3\uff0c\u56e0\u4e3a\u5b50\u7ec4\u4ef6\u662f\u5728\u7236\u7ec4\u4ef6\u4e2d\u8c03\u7528\u7684\uff0c\u5728\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u4f20\u9012\u7684\u53c2\u6570\u81ea\u7136\u662f\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u4e86\u3002\\n\\n\u6bd4\u5982\uff1a\\n\\n```javascript\\nimport React from \\"react\\";\\n\\nclass Comm extends React.Component {\\n    constructor(props) {\\n        super(props);\\n    }\\n    componentDidMount() {\\n        console.log(\'componentDidMount\')\\n    }\\n\\n    shouldComponentUpdate() {\\n        console.log(\\"shouldComponentUpdate\\")\\n        return true\\n    }\\n    componentDidUpdate() {\\n        console.log(\\"componentDidUpdate\\")\\n    }\\n    componentWillUnmount() {\\n        console.log(\\"componentWillUnmount\\")\\n    }\\n    changeText = () => {\\n        this.setState({\\n            data: new Date().getTime()\\n        })\\n    }\\n    state = {\\n        data: 9\\n    }\\n    render() {\\n        return <React.Fragment>\\n            <Children data={this.state.data} />\\n            <button onClick={this.changeText}>\u6309\u94ae</button>\\n        </React.Fragment>\\n    }\\n}\\n\\nfunction Children({ data }) {\\n    return <div>\\n        <div>\u8fd9\u662f\u5b50\u7ec4\u4ef6\u7684:{data}</div>\\n    </div>\\n}\\n```\\n\\n\u8fd9\u5176\u4e2d\u7684props\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u7136\u800cReact\u7684\u6838\u5fc3\u7406\u5ff5\u5c31\u662f\u901a\u8fc7\u6570\u636e\u9a71\u52a8UI\u6e32\u67d3\u3002\u6240\u4ee5\u60f3\u8981\u66f4\u65b0\u7ec4\u4ef6\uff0c\u53ea\u80fd\u901a\u8fc7\u72b6\u6001state\u3002\\n\\nReact\u628a\u7ec4\u4ef6\u770b\u6210\u662f\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u901a\u8fc7\u548c\u7528\u6237\u7684\u4ea4\u4e92\uff0c\u5b9e\u73b0\u4e0d\u540c\u7684\u72b6\u6001\uff0c\u7136\u540e\u6e32\u67d3UI\uff0c\u8ba9\u7528\u6237\u754c\u9762\u548c\u6570\u636e\u4fdd\u6301\u4e00\u81f4\uff0c\u6240\u4ee5\u7ec4\u4ef6\u7684\u72b6\u6001\u66f4\u65b0\u540e\uff0cReact\u5c31\u91cd\u65b0\u6e32\u67d3\u5bf9\u5e94\u7684\u7ec4\u4ef6\uff0c\u4e0d\u7528\u64cd\u4f5cDOM\u3002\\n\\n\u5982\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5c31\u662f\u901a\u8fc7\u4fee\u6539state\u6765\u66f4\u65b0\u7ec4\u4ef6\u7684\uff0c\u5728\u4fee\u6539state\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u4f7f\u7528React\u7ec4\u4ef6\u5185\u7f6e\u7684\u65b9\u6cd5setState\uff0c\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u7684key\u5c31\u662f\u9700\u8981\u66f4\u65b0\u7684state\uff0c\u5bf9\u8c61\u7684\u503c\u5c31\u662fstate\u66f4\u65b0\u540e\u7684\u503c\u3002\\n\\n\u5982\u679csetState\u63a5\u6536\u7684\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u8fd9\u4e2a\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5f53\u524d\u7684state\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5f53\u524d\u7684props\u3002\u6bd4\u5982\uff1a\\n\\n```javascript\\n this.setState((state, props) => {\\n            console.log(state, props)\\n            return {\\n                data: new Date().getTime()\\n            }\\n        })\\n```\\n\\n\u6ce8\u610f\u51e0\u70b9\uff1a\\n\\n1. \u5728\u66f4\u65b0state\u7684\u65f6\u5019\uff0c\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539state\uff0c\u56e0\u4e3a\u76f4\u63a5\u4fee\u6539\uff0c\u5b9e\u9645\u4e0a\u662f\u7ed9\u7ec4\u4ef6\u7684State\u91cd\u65b0\u8d4b\u503c\uff0c\u4e0d\u80fd\u89e6\u53d1\u7ec4\u4ef6\u6e32\u67d3\uff1b\\n2. \u66f4\u65b0State\u662f\u5f02\u6b65\u7684\uff0c\u90a3\u4e48setState\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u4fee\u6539state\u7684\u503c\uff0c\u6240\u4ee5\u5728\u66f4\u65b0state\u7684\u65f6\u5019\u4e0d\u8981\u4f9d\u8d56\u524d\u4e00\u4e2astate\u6765\u5bf9\u4e0b\u4e00\u4e2astate\u7684\u66f4\u6539\uff0c\u6bd4\u5982\u6709\u8fd9\u6837\u7684\u4ee3\u7801\uff1a\\n\\n```javascript\\n    changeText = () => {\\n        this.setState({\\n            data: this.state.data + 2\\n        })\\n        this.setState({\\n            data: this.state.data + 2\\n        })\\n        this.setState({\\n            data: this.state.data + 2\\n        })\\n    }\\n```\\n\\n\u5bf9state\u8fdb\u884c3\u6b21\u8fde\u7eed\u66f4\u65b0\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u662f\u53ea\u8fdb\u884c\u4e00\u6b21\u66f4\u65b0\u8fd0\u7b97\u3002\u56e0\u4e3a\u5728\u540c\u4e00\u4e2a\u5468\u671f\u5185\u8fdb\u884c\u591a\u6b21\u52a02\u7684\u64cd\u4f5c\uff0c\u76f8\u5f53\u4e8e\uff1a\\n\\n```javascript\\nlet obj = { data: 0 };\\nconst sss = Object.assign({}, { data: obj.data + 2 }, { data: obj.data + 2 }, { data: obj.data + 2 })\\n\\n```\\n\\n\u6700\u540e\u7684sss\u7684\u7ed3\u679c\u662f{data:2}\\n\\n\u6240\u4ee5\u9047\u5230\u8fd9\u6837\u7684\u573a\u666f\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5411setState\u51fd\u6570\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\uff0c\u5728\u51fd\u6570\u6765\u5904\u7406\u4e4b\u524d\u7684\u5f02\u6b65\u7ed3\u679c\uff1a\\n\\n```javascript\\nchangeText = () => {\\n        this.setState((state) => {\\n            return {\\n                data: state.data + 2\\n            }\\n        })\\n        this.setState((state) => {\\n            return {\\n                data: state.data + 2\\n            }\\n        })\\n        this.setState((state) => {\\n            return {\\n                data: state.data + 2\\n            }\\n        })\\n    }\\n```\\n\\n3. \u5728\u8c03\u7528setState\u7684\u65f6\u5019\uff0cReact\u4f1a\u628a\u63d0\u4f9b\u7684\u5bf9\u8c61\u5408\u5e76\u5230\u5f53\u524d\u7684state\u4e2d\uff0c\u4f46\u662f\u53ea\u4f1a\u66f4\u65b0\u4fee\u6539\u7684\u72b6\u6001\uff0c\u5176\u4ed6\u72b6\u6001\u4e0d\u53d8\u3002\\n\\n## \u7ec4\u4ef6\u901a\u4fe1\\n\\n\u7ec4\u4ef6\u4e4b\u95f4\u7684\u901a\u4fe1\u662f\u901a\u8fc7props\u5c5e\u6027\u6765\u5b8c\u6210\uff0c\u5728\u524d\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u77e5\u9053\u7236\u7ec4\u4ef6\u901a\u8fc7props\u76f4\u63a5\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\uff0c\u7ec4\u4ef6\u672c\u8eab\u662f\u901a\u8fc7state\u6765\u7ef4\u62a4\u81ea\u8eab\u7684\u72b6\u6001\uff0c\u90a3\u4e48\u5982\u679c\u5b50\u7ec4\u4ef6\u60f3\u8981\u5411\u7236\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u5462\uff1f\\n\\n\u4e5f\u662f\u901a\u8fc7props\uff0c\u56e0\u4e3aprops\u53ef\u4ee5\u4f20\u9012\u51fd\u6570\uff0c\u90a3\u5b50\u7ec4\u4ef6\u8c03\u7528\u7236\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684\u51fd\u6570\u3002\u7531\u4e8e\u8fd9\u4e2a\u51fd\u6570\u662f\u5728\u7236\u7ec4\u4ef6\u5185\u90e8\u5b9a\u4e49\u7684\uff0c\u7236\u7ec4\u4ef6\u5c31\u53ef\u4ee5\u5728\u51fd\u6570\u88ab\u8c03\u7528\u7684\u65f6\u5019\u63a5\u6536\u5e76\u4e14\u4fee\u6539\u7684\u81ea\u8eab\u7684\u72b6\u6001\u3002\\n\\n\u73b0\u5728\u4fee\u6539\u4e00\u4e0b\u524d\u9762\u4ee3\u7801\uff1a\\n\\n```javascript\\nfunction Children({ data ,changeText}) {\\n    return <div>\\n        <div>\u8fd9\u662f\u5b50\u7ec4\u4ef6\u7684:{data}\\n        <button onClick={()=>changeText()}>\u4fee\u6539</button>\\n        </div>\\n    </div>\\n}\\n```\\n\\n```javascript\\n    render() {\\n        return <React.Fragment>\\n            <p>\u7236\u7ec4\u4ef6\uff1a{this.state.data}</p>\\n            <Children data={this.state.data} changeText={this.changeText}/>\\n            <button onClick={this.changeText} >\u6309\u94ae</button>\\n        </React.Fragment>\\n    }\\n```\\n\\n\u73b0\u5728\u5c31\u53ef\u5728\u5b50\u7ec4\u4ef6\u4e2d\u4fee\u6539\u7236\u7ec4\u4ef6\u7684\u6570\u636e\u4e86\u3002\\n\\n## \u590d\u6742\u72b6\u6001\u7ba1\u7406\u7684\u89e3\u51b3\u65b9\u6848\\n\\n\u524d\u9762\u4ecb\u7ecd\u4e86\u7ec4\u4ef6\u57fa\u672c\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u5f53\u9879\u76ee\u7684\u4e1a\u52a1\u903b\u8f91\u6bd4\u8f83\u590d\u6742\u7684\u65f6\u5019\uff0c\u90a3\u4e48\u8fd9\u6837\u7684\u901a\u4fe1\u65b9\u6cd5\u5c31\u4e0d\u5408\u9002\u4e86\u3002\u6bd4\u5982\u73b0\u5728\u6709\u8fd9\u6837\u7684\u7ec4\u4ef6\u7ed3\u6784\uff1a\\n\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/2e8adc6ab1a243fa93cf6e313964a8d6.png)\\n\\n\u73b0\u5728\u7ec4\u4ef6E\u548c\u7ec4\u4ef6F\u901a\u4fe1\uff0c\u6309\u7167\u4e4b\u524d\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u7ec4\u4ef6E\u628a\u72b6\u6001\u4f20\u7ed9\u7ec4\u4ef6B\uff0c\u7ec4\u4ef6B\u518d\u628a\u72b6\u6001\u4f20\u7ed9\u7ec4\u4ef6A\uff0cA\u518d\u4f20\u7ed9C\uff0c\u6700\u540eC\u4f20\u7ed9\u7ec4\u4ef6F\u3002\u8fd9\u6837\u7ec4\u4ef6\u5c42\u7ea7\u7ed3\u6784\u7b80\u5355\u7684\u8bdd\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\u3002\\n\\n\u5982\u679c\u7ec4\u4ef6\u5c42\u7ea7\u7ed3\u6784\u8db3\u591f\u590d\u6742\u4e86\uff0c\u5c31\u9700\u8981\u5199\u5927\u91cf\u7684\u901a\u4fe1\u903b\u8f91\u4ee3\u7801\uff0c\u4f46\u662f\u6574\u4e2a\u901a\u4fe1\u8fc7\u7a0b\u4e2d\uff0c\u7ec4\u4ef6B\u3001A\u548cC\u4ec5\u4ec5\u662f\u627f\u62c5\u901a\u9053\u7684\u4f5c\u7528\u3002\\n\\nReact\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6bd4\u8f83\u9ad8\u7ea7\u7684\u6570\u636e\u7ba1\u7406\u65b9\u5f0f\u2014\u2014Context\u4e0a\u4e0b\u6587\uff0c\u4f46\u662fContext\u4e5f\u4f1a\u6709\u4e00\u4e9b\u95ee\u9898\u7684\uff0c\u6bd4\u5982Context\u7684\u4fee\u6539\u4e0d\u592a\u65b9\u4fbf\u3002\\n\\n  \u8fd8\u6709\u4e00\u4e2a\u65b9\u6cd5\u5c31\u662fRedux\uff0cRedux\u662fJavaScript\u72b6\u6001\u5bb9\u5668\uff0c\u63d0\u4f9b\u53ef\u9884\u6d4b\u7684\u72b6\u6001\u7ba1\u7406\u3002\\n\u4e00\u4e2aRedux\u5e94\u7528\u4e2d\uff0c\u6240\u6709\u7684State\u90fd\u662f\u4ee5\u4e00\u4e2a\u5bf9\u8c61\u6811\u7684\u5f62\u5f0f\u5b58\u50a8\u5728\u552f\u4e00\u7684store\u4e2d\u3002\\n\\n\u6539\u53d8state\uff0c\u53ea\u80fd\u901a\u8fc7\u89e6\u53d1action\uff0caction\u662f\u4e00\u4e2a\u63cf\u8ff0\u53d1\u751f\u4ec0\u4e48\u4e8b\u7684\u5bf9\u8c61\uff0c\u4e3a\u4e86\u63cf\u8ff0action\u5982\u4f55\u6539\u53d8state\uff0c\u8fd8\u9700\u8981\u5199reducers\u3002\\n\\n\u73b0\u5728\u5148\u6765\u5b9a\u4e49\u4e00\u4e0bstore\uff1a\\n\\n```javascript\\nimport {legacy_createStore,applyMiddleware,compose}  from \'redux\';\\nimport thunk from \'redux-thunk\';\\nimport { persistStore, persistReducer } from \\"redux-persist\\";\\nimport storage from \\"redux-persist/lib/storage\\";\\nimport reducers from \'./reducers\';\\nconst storageConfig = {\\n  key: \\"root\\",\\n  storage,\\n};\\nconst  middleware = [thunk];\\n\\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\\nconst configStore = persistReducer(storageConfig,reducers);\\nexport let store = legacy_createStore(configStore,composeEnhancers(\\n  applyMiddleware(...middleware)\\n));\\nexport let persistor = persistStore(store);\\n```\\n\\n\u8fd9\u91cc\u9762\u5305\u542b\u4e86\u6570\u636e\u6301\u4e45\u5316\u4fdd\u5b58\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u4e0d\u7528\u7ba1\u3002\u901a\u8fc7createStore\u65b9\u6cd5\u6765\u521b\u5efastore\u7684\uff0c\u8fd9\u91cc\u56e0\u4e3a\u7248\u672c\u6bd4\u8f83\u65b0\uff0c\u7528\u7684\u662flegacy_createStore\u3002\\n\\n\u5728\u5e94\u7528\u7684\u5165\u53e3\u6587\u4ef6index.js\u6216\u8005\u662fapp.jsx\uff0c\u6211\u8fd9\u91cc\u662findex.jsx\uff1a\\n\\n```javascript\\nimport ReactDOM from \'react-dom/client\';\\nimport \'./index.css\';\\nimport App from \'./App\';\\nimport reportWebVitals from \'./reportWebVitals\';\\nimport { Provider } from \'react-redux\';\\nimport { BrowserRouter } from \\"react-router-dom\\";\\nimport { store, persistor } from \\"./store\\";\\nconst { PersistGate } = require(\'redux-persist/integration/react\')\\nconst root = ReactDOM.createRoot(\\n  document.getElementById(\'root\') as HTMLElement\\n);\\nroot.render(\\n  <Provider store={store}>\\n    <PersistGate loading={null} persistor={persistor}>\\n      <BrowserRouter>\\n        <App />\\n      </BrowserRouter>\\n    </PersistGate>\\n  </Provider>\\n);\\n// If you want to start measuring performance in your app, pass a function\\n// to log results (for example: reportWebVitals(console.log))\\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\\nreportWebVitals();\\n\\n```\\n\\n\u4f7f\u7528reac-redux\u81ea\u5e26\u7684Provider \u7ec4\u4ef6\u6765\u5305\u88f9\u5e94\u7528\u7684\u9876\u7ea7\u7ec4\u4ef6\u3002\\n\\nreducer\u4ee3\u7801\uff1a\\n\\n```javascript\\nimport { combineReducers } from \\"redux\\";\\nimport menuReducer from \\"./menu\\";\\nconst reducers = combineReducers({\\n    menus: menuReducer,\\n});\\n\\nexport default reducers\\n```\\n\\n\u8fd9\u91cc\u4f7f\u7528\u4e86combineReducers\u51fd\u6570\u628a\u591a\u4e2areducer\u7ec4\u5408\u8d77\u6765\uff0c\u73b0\u5728\u53ea\u6709\u4e00\u4e2amenu\uff1a\\n\\n```javascript\\nconst menuState = [\\n    {\\n        title: \\"\u7ec4\u4ef6\\",\\n        key: \\"component\\",\\n        router: null,\\n        children: [\\n            // { title: \\"\u8868\u683c\\", key: \'table\', router: \\"/components/table\\" },\\n            { title: \\"React\\", key: \'react\', router: \\"/components/react\\" }\\n        ]\\n    },\\n    {\\n        title: \\"Echarts\\",\\n        key: \\"1\\",\\n        router: null,\\n        children: [\\n            { title: \\"dashboard\\", key: \'1-1\', router: \\"/components/dashboard\\", component: \\"Dashboard\\" },\\n            { title: \\"\u67f1\u72b6\u56fe\\", key: \'1-2\', router: \\"/components/barEcharts\\", component: \\"Bar\\" },\\n            { title: \\"\u6761\u5f62\u56fe\\", key: \'1-3\', router: \\"/components/rowBar\\", component: \\"RowBar\\" },\\n            { title: \\"\u6247\u5f62\u56fe\\", key: \'1-4\', router: \\"/components/radialPolar\\", component: \\"RadialPolar\\" },\\n            { title: \\"\u6570\u5b66\u51fd\u6570\\", key: \'1-5\', router: \\"/components/Sin\\", component: \\"Sin\\" },\\n            { title: \\"\u6563\u70b9\u56fe\\", key: \'1-6\', router: \\"/components/ScatterChart\\", component: \\"ScatterChart\\" },\\n        ]\\n    },\\n  \\n    {\\n        title: \\"\u53ef\u89c6\u5316\\",\\n        key: \\"visualization\\",\\n        router: null,\\n        children: [\\n            { title: \\"\u53ef\u89c6\u53161\\", key: \'visualization-1\', router: \\"/app1\\", component: \\"Modal\\" },\\n        ]\\n    },\\n    \\n];\\nexport default function menuReducer(state = menuState, action: any) {\\n    switch (action.type) {\\n        case \\"UPDATE_CONFIG\\":\\n            return {\\n                config: action.value\\n            };\\n        default:\\n            return state\\n    }\\n}\\n```\\n\\n\u5728Comm\u7ec4\u4ef6\u4e2d\u4ecestore\u4e2d\u8ba2\u9605\u5bf9\u5e94\u7684state\uff1a\\n\\n```javascript\\nconst mapStateToProps = (state) => {\\n    return { menus: state.menus }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        changeMenu: () => dispatch({ type: \'UPDATE_CONFIG\', value: [] })\\n    }\\n}\\nexport default connect(mapStateToProps, mapDispatchToProps)(Comm);\\n```\\n\\n\u5728Comm\u7ec4\u4ef6\u7684componentDidMount\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u6253\u5370\u8ba2\u9605\u7684state\uff0c\u6548\u679c\u5982\u56fe\uff1a\\n\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/4ebb800c1e7540fa85259f87e3fe2560.png)\\n\\nmapDispatchToProps\u65b9\u6cd5\u4e2d\uff0c\u5c06dispatch\u4f20\u5230\u7ec4\u4ef6\u4e2d\u5e76\u4e14\uff0c\u5728\u7ec4\u4ef6\u4e2d\u53ea\u8981\u89e6\u53d1\u5bf9\u5e94\u7684dispatch\uff0c\u5c31\u53ef\u4ee5\u4fee\u6539store\u7684state\u4e86\uff0cComm\u7ec4\u4ef6\u5b8c\u6574\u4ee3\u7801\uff1a\\n\\n```javascript\\nimport React from \\"react\\";\\nimport { connect } from \\"react-redux\\";\\nclass Comm extends React.Component {\\n    constructor(props) {\\n        super(props);\\n    }\\n    componentDidMount() {\\n        console.log(\'componentDidMount\', this.props)\\n    }\\n\\n    shouldComponentUpdate() {\\n        console.log(\\"shouldComponentUpdate\\")\\n        return true\\n    }\\n    componentDidUpdate() {\\n        console.log(\\"componentDidUpdate\\")\\n    }\\n    componentWillUnmount() {\\n        console.log(\\"componentWillUnmount\\")\\n    }\\n    changeText = () => {\\n        this.setState((state) => {\\n            return {\\n                data: state.data + 2\\n            }\\n        })\\n        this.setState((state) => {\\n            return {\\n                data: state.data + 2\\n            }\\n        })\\n        this.setState((state) => {\\n            return {\\n                data: state.data + 2\\n            }\\n        })\\n        this.props.changeMenu()\\n        console.log(\\"this.props\\", this.props)\\n    }\\n    state = {\\n        data: 9\\n    }\\n    render() {\\n        return <React.Fragment>\\n            <p>\u7236\u7ec4\u4ef6\uff1a{this.state.data}</p>\\n            <Children data={this.state.data} changeText={this.changeText} />\\n            <button onClick={this.changeText} >\u6309\u94ae</button>\\n        </React.Fragment>\\n    }\\n}\\n\\nfunction Children({ data, changeText }) {\\n    return <div>\\n        <div>\u8fd9\u662f\u5b50\u7ec4\u4ef6\u7684:{data}\\n            <button onClick={() => changeText()}>\u4fee\u6539</button>\\n        </div>\\n    </div>\\n}\\nconst mapStateToProps = (state) => {\\n    return { menus: state.menus }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        changeMenu: () => dispatch({ type: \'UPDATE_CONFIG\', value: [] })\\n    }\\n}\\nexport default connect(mapStateToProps, mapDispatchToProps)(Comm);\\n```\\n\\n\u8fd9\u5c31\u662f\u7ec4\u4ef6\u7684\u6570\u636e\u6d41\u3002"},{"id":"React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","metadata":{"permalink":"/react/React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","source":"@site/react/react202304.md","title":"React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":5.69,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":4,"slug":"React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","title":"React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","tags":["react"]},"prevItem":{"title":"React\uff1a\u6570\u636e\u6d41","permalink":"/react/React\uff1a\u6570\u636e\u6d41"},"nextItem":{"title":"React\uff1aRedux\u548cFlux","permalink":"/react/React\uff1aRedux\u548cFlux"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:10:22\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:10:23\\n * @FilePath: /blog/react/react202304.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\n\\n\u7ec4\u4ef6\u751f\u547d\uff0c\u5c31\u662f\u7ec4\u4ef6\u5728\u4e0d\u540c\u9636\u6bb5\u63d0\u4f9b\u5bf9\u5e94\u7684\u94a9\u5b50\u51fd\u6570\uff0c\u6765\u5904\u7406\u903b\u8f91\u64cd\u4f5c\u3002\u6bd4\u5982\u521d\u59cb\u5316\u9636\u6bb5\uff0c\u6211\u4eec\u9700\u8981\u521d\u59cb\u5316\u7ec4\u4ef6\u76f8\u5173\u7684\u72b6\u6001\u548c\u53d8\u91cf\u3002\u7ec4\u4ef6\u9500\u6bc1\u9636\u6bb5\u65f6\uff0c\u6211\u4eec\u9700\u8981\u628a\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\u9500\u6bc1\u6765\u8282\u7ea6\u5185\u5b58\u3002\\n\\n\\nReact\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a\u6302\u8f7d\u9636\u6bb5\u3010Mount\u3011\u3001\u66f4\u65b0\u9636\u6bb5\u3010Update\u3011\u548c\u5378\u8f7d\u9636\u6bb5\u3010Umount\u3011\u3002\\n\\n### \u7ec4\u4ef6\u6302\u8f7d\u9636\u6bb5\\n\\n\u6302\u8f7d\u9636\u6bb5\uff0c\u5c31\u662f\u7ec4\u4ef6\u5b9e\u4f8b\u5316\u5e76\u4e14\u6302\u8f7d\u5230DOM\u6811\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u4e2d\u4f9d\u6b21\u8c03\u7528\u751f\u547d\u5468\u671f\u51fd\u6570\u4e3a\uff1a\\n\\n1. constructor()\\n2. getDerivedStateFromProps()\\n3. render()\\n4. componentDidMount()\\n\\n##### constructor(props)\\n\\nconstructor\uff0c\u662f\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u521d\u59cb\u5316\u7ec4\u4ef6\u7684\u72b6\u6001\u548c\u64cd\u4f5c\u3002React\u7c7b\u7ec4\u4ef6\u4e00\u822c\u662f\u901a\u8fc7\u7ee7\u627fReact.Component\u6765\u521b\u5efa\u7684\uff0c\u6240\u4ee5\u9700\u8981\u8c03\u7528super(props)\uff0c\u521d\u59cb\u5316\u7236\u7c7b\u3002\\n\\n\u5728constructor\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u521d\u59cb\u5316state\uff0c\u540c\u65f6\u53ef\u4ee5\u5bf9\u64cd\u4f5c\u51fd\u6570\u8fdb\u884cbind\u7ed1\u5b9a\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u80fd\u5728constructor\u4e2d\u8c03\u7528setState\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3asetState\u662f\u7528\u6765\u66f4\u65b0\u72b6\u6001\u7684\u3002\\n\\n\u64cd\u4f5c\u51fd\u6570\u7ed1\u5b9a\u5982\u4e0b\uff1a\\n\\n```javascript\\nimport React from \\"react\\";\\ninterface PropsType {\\n  name: string;\\n}\\nclass App extends React.Component<any, PropsType> {\\n  constructor(props: any) {\\n    super(props);\\n    this.state = {\\n      name: \\"Duxinyues\\",\\n    };\\n\\n    this.handle.bind(this);\\n  }\\n  handle = function(param:any) {\\n    console.log(param);\\n  };\\n  render(): React.ReactNode {\\n    console.log(\\"this.state\\", this.state);\\n    const { name } = this.state;\\n    return (\\n      <div>\\n        {name}\\n        <button onClick={()=>this.handle(345)}>\u70b9\u51fb</button>\\n      </div>\\n    );\\n  }\\n}\\nexport default App;\\n```\\n\\n\u5982\u679c\u5728\u4e0d\u60f3\u5728constructor\u4e2d\u7ed1\u5b9athis\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u5728\u4f7f\u7528\u64cd\u4f5c\u51fd\u6570\u7684\u65f6\u5019\u7ed1\u5b9athis\u3002\u6bd4\u5982\uff1a\\n\\n```javascript\\n <button onClick={this.handle.bind(this,423)}>\u70b9\u51fb</button>\\n```\\n\\n\u6216\u8005\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u6765\u5b9a\u4e49\u64cd\u4f5c\u51fd\u6570\uff0c\u56e0\u4e3a\u7bad\u5934\u51fd\u6570\u7684this\u6307\u5411\u7684\u662f\u5b83\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u800c\u4e0d\u662f\u6307\u5411\u5b83\u7684\u8c03\u7528\u8005\u3002\\n\\n```javascript\\n handle = (param:any) =>{\\n    console.log(param);\\n  };\\n```\\n\\n\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u7528\u518dconstructor\u4e2d\u521d\u59cb\u5316\u72b6\u6001\uff0c\u7ec4\u4ef6\u4f1a\u9ed8\u8ba4\u521d\u59cb\u5316\u7684\u3002\\n\\n---\\n\\n##### getDerivedStateFromProps()\\n\\n\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u662f\u5728\u521d\u59cb\u5316\u540e\u6216\u8005\u662f\u5728\u66f4\u65b0\u9636\u6bb5\u4e2d\uff0c\u63a5\u6536\u65b0props\u540e\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u65b0\u7684state\u3002\u5982\u679c\u8fd4\u56de\u7684\u662fnull\uff0c\u90a3\u4e48\u8bf4\u660e\u7ec4\u4ef6\u4e0d\u7528\u66f4\u65b0state\u3002\\n\\n\u53e6\u5916\uff0cgetDerivedStateFromProps()\u662fstatic\u65b9\u6cd5\uff0c\u5728\u5185\u90e8\u662f\u4e0d\u80fd\u83b7\u53d6\u5230this\u7684\u3002\\n\\n---\\n\\n##### render\\n\\nrender\u65b9\u6cd5\u662f\u6839\u636e\u72b6\u6001state\u548c\u5c5e\u6027props\u6765\u6e32\u67d3\u7ec4\u4ef6\u3002\u5982\u679cstate\u548cprops\u4e0d\u53d8\uff0c\u90a3\u4e48render\u8fd4\u56de\u7684\u7ed3\u679c\u90fd\u662f\u4e00\u6837\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e0d\u8981\u5728render\u65b9\u6cd5\u5185\u6539\u53d8\u7ec4\u4ef6\u72b6\u6001\uff0c\u4e5f\u4e0d\u8981\u5728render\u65b9\u6cd5\u5185\u76f4\u63a5\u4e2a\u6d4f\u89c8\u5668\u8fdb\u884c\u4ea4\u4e92\u3002\\n\\n---\\n\\n##### componentDidMount()\\n\\ncomponentDidMount\u51fd\u6570\u5728\u7ec4\u4ef6\u6302\u8f7d\u540e\u8c03\u7528\uff0c\u4e5f\u5c31\u662f\u5728render\u65b9\u6cd5\u540e\u8c03\u7528\uff0c\u800c\u4e14\u662f\u5728\u7ec4\u4ef6\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u53ea\u8c03\u7528\u4e00\u6b21\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u5728\u8fd9\u4e2a\u65b9\u6cd5\u5185\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\u7b49\u7b49\u3002\\n\\n---\\n\\n### \u66f4\u65b0\u9636\u6bb5\\n\\n\u5f53\u7ec4\u4ef6\u7684\u72b6\u6001\u6216\u8005\u5c5e\u6027\u53d8\u5316\u7684\u65f6\u5019\uff0c\u4f1a\u5bfc\u81f4\u7ec4\u4ef6\u66f4\u65b0\uff0c\u4f9d\u6b21\u8c03\u7528\u751f\u547d\u5468\u671f\u51fd\u6570\uff1a\\n\\n1. getDerivedStateFromProps()\\n2. componentWillUpdate()\\n3. render()\\n4. getSnapshotBeforeUpdate()\\n5. componentDidUpdate()\\n\\n---\\n\\n##### shouldComponentUpdate(nextProps,nextState)\\n\\n\u5728\u7ec4\u4ef6\u66f4\u65b0\u4e4b\u524d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7shouldComponentUpdate()\u51fd\u6570\u6765\u5224\u65ad\u7ec4\u4ef6\u662f\u5426\u9700\u8981\u66f4\u65b0\uff0c\u5b83\u9ed8\u8ba4\u8fd4\u56detrue\uff0c\u6bcf\u6b21\u72b6\u6001\u548c\u5c5e\u6027\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u7ec4\u4ef6\u90fd\u91cd\u65b0render\u4e00\u4e0b\u3002\u5982\u679c\u8fd4\u56defalse\uff0c\u90a3\u4e48\u7ec4\u4ef6\u5c31\u4e0d\u4f1a\u66f4\u65b0\u3002\\n\\n\u53e6\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u7528React.PureComponent\u6765\u521b\u5efa\u7ec4\u4ef6\uff0cPureComponent\u9ed8\u8ba4\u8fdb\u884cstate\u548cprops\u7684\u6bd4\u8f83\u8fd9\u662f\u7ec4\u4ef6\u4f18\u5316\u7684\u4e00\u79cd\u624b\u6bb5\u3002\\n\\n---\\n\\n##### getSnapshotBeforeUpdate()\\n\\n\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5728render\u4e4b\u540e\uff0cdom\u6e32\u67d3\u4e4b\u524d\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u4f5c\u4e3acomponentDidUpdate\u51fd\u6570\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u6bd4\u5982\u5b98\u65b9\u7684\u4f8b\u5b50\uff1a\\n\\n```javascript\\nclass ScrollingList extends React.Component {\\n  constructor(props) {\\n    super(props);\\n    this.listRef = React.createRef();\\n  }\\n\\n  getSnapshotBeforeUpdate(prevProps, prevState) {\\n    // \u6211\u4eec\u662f\u5426\u5728 list \u4e2d\u6dfb\u52a0\u65b0\u7684 items \uff1f\\n    // \u6355\u83b7\u6eda\u52a8\u200b\u200b\u4f4d\u7f6e\u4ee5\u4fbf\u6211\u4eec\u7a0d\u540e\u8c03\u6574\u6eda\u52a8\u4f4d\u7f6e\u3002\\n    if (prevProps.list.length < this.props.list.length) {\\n      const list = this.listRef.current;\\n      return list.scrollHeight - list.scrollTop;\\n    }\\n    return null;\\n  }\\n\\n  componentDidUpdate(prevProps, prevState, snapshot) {\\n    // \u5982\u679c\u6211\u4eec snapshot \u6709\u503c\uff0c\u8bf4\u660e\u6211\u4eec\u521a\u521a\u6dfb\u52a0\u4e86\u65b0\u7684 items\uff0c\\n    // \u8c03\u6574\u6eda\u52a8\u4f4d\u7f6e\u4f7f\u5f97\u8fd9\u4e9b\u65b0 items \u4e0d\u4f1a\u5c06\u65e7\u7684 items \u63a8\u51fa\u89c6\u56fe\u3002\\n    //\uff08\u8fd9\u91cc\u7684 snapshot \u662f getSnapshotBeforeUpdate \u7684\u8fd4\u56de\u503c\uff09\\n    if (snapshot !== null) {\\n      const list = this.listRef.current;\\n      list.scrollTop = list.scrollHeight - snapshot;\\n    }\\n  }\\n\\n  render() {\\n    return (\\n      <div ref={this.listRef}>{/* ...contents... */}</div>\\n    );\\n  }\\n}\\n\u5728\u4e0a\u8ff0\u793a\u4f8b\\n```\\n\\n---\\n\\n### \u5378\u8f7d\u9636\u6bb5\\n\\ncomponentWillUnmount()\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5728\u7ec4\u4ef6\u5378\u8f7d\u9636\u6bb5\u4e2d\u8c03\u7528\\n\\n### \u6355\u83b7\u9519\u8bef\\n\\nReact\u6709\u4e00\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570componentDidCatch(error,info)\u3002\\n\\nReact\u7ec4\u4ef6\u4ea7\u751f\u9519\u8bef\u6ca1\u6709\u88ab\u6355\u83b7\uff0c\u90a3\u4e48\u5c31\u629b\u7ed9\u4e0a\u5c42\u7ec4\u4ef6\uff0c\u5982\u679c\u4e0a\u5c42\u7ec4\u4ef6\u4e5f\u6ca1\u6709\u6355\u83b7\uff0c\u5c31\u4f1a\u629b\u5230\u9876\u5c42\u7ec4\u4ef6\uff0c\u6700\u7ec8\u5bfc\u81f4\u6d4f\u89c8\u5668\u767d\u5c4f\u3002"},{"id":"React\uff1aRedux\u548cFlux","metadata":{"permalink":"/react/React\uff1aRedux\u548cFlux","source":"@site/react/react202305.md","title":"React\uff1aRedux\u548cFlux","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":5.145,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":5,"slug":"React\uff1aRedux\u548cFlux","title":"React\uff1aRedux\u548cFlux","tags":["react"]},"prevItem":{"title":"React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","permalink":"/react/React\uff1a\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406"},"nextItem":{"title":"React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","permalink":"/react/React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:11:36\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:15:09\\n * @FilePath: /blog/react/react202305.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\nReact\uff0c\u7528\u6765\u6784\u5efa\u7528\u6237\u754c\u9762\uff0c\u5b83\u6709\u4e09\u4e2a\u7279\u70b9\uff1a\\n\\n1. \u4f5c\u4e3aview\uff0c\u6784\u5efa\u4e0a\u7528\u6237\u754c\u9762\\n2. \u865a\u62dfDOM\uff0c\u76ee\u7684\u5c31\u662f\u9ad8\u6027\u80fdDOM\u6e32\u67d3\u3010diff\u7b97\u6cd5\u3011\u3001\u7ec4\u4ef6\u5316\u3001\u591a\u7aef\u540c\u6784\\n3. \u5355\u5411\u6570\u636e\u6d41\uff0c\u662f\u4e00\u79cd\u81ea\u4e0a\u800c\u4e0b\u7684\u6e32\u67d3\u65b9\u5f0f\u3002\\n\\n## Flux\\n\\n\u5728\u4e00\u4e2aReact\u5e94\u7528\u4e2d\uff0cUI\u90e8\u5206\u662f\u7531\u65e0\u6570\u4e2a\u7ec4\u4ef6\u5d4c\u5957\u6784\u6210\u7684\uff0c\u7ec4\u4ef6\u548c\u7ec4\u4ef6\u4e4b\u95f4\u5c31\u5b58\u5728\u5c42\u7ea7\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u7236\u7ec4\u4ef6\u3001\u5b50\u7ec4\u4ef6\u4ee5\u53ca\u9876\u5c42\u7ec4\u4ef6\u3002\\n\\n\u5f53\u6211\u4eec\u83b7\u53d6\u5230\u6570\u636e\u540e\uff0c\u6839\u636eReact\u81ea\u4e0a\u800c\u4e0b\u7684\u6e32\u67d3\u65b9\u5f0f\uff0c\u6211\u4eec\u628a\u6570\u636e\u4f20\u7ed9\u9876\u5c42\u7ec4\u4ef6\uff0c\u7531\u9876\u5c42\u7ec4\u4ef6\u901a\u8fc7\u5c5e\u6027props\uff0c\u5c06\u6570\u636e\u4f20\u7ed9\u5404\u4e2a\u5b50\u7ec4\u4ef6\uff0c\u8fd9\u6837\u6570\u636e\u5c31\u4e00\u5c42\u4e00\u5c42\u4f20\u9012\u4e0b\u53bb\uff0c\u5404\u4e2a\u5b50\u7ec4\u4ef6\u83b7\u53d6\u81ea\u5df1\u6240\u9700\u7684\u6570\u636e\uff0c\u6700\u7ec8\u5b8c\u6210UI\u7684\u6e32\u67d3\u3002\\n\\n\u5f53\u6709\u4e00\u4e2a\u6570\u636e\u53d1\u751f\u4e86\u53d8\u5316\u540e\uff0c\u662f\u5982\u4f55\u901a\u77e5\u7ec4\u4ef6\u66f4\u65b0\u5462\uff1f\u601d\u8def\u5982\u4e0b\uff1a\\n\\n1. \u5b9a\u4e49\u4e00\u4e2a\u6570\u636e\u5b58\u50a8store\uff0c\u5b83\u5b58\u50a8\u7684\u662f\u5e94\u7528\u7684\u5f53\u524d\u7684\u72b6\u6001state\uff1b\\n2. \u7528\u6237\u64cd\u4f5c\u5bfc\u81f4\u6570\u636e\u53d8\u66f4\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u89e6\u53d1\u4e00\u4e2aaction\uff0c\u544a\u77e5store\u6709\u6570\u636e\u53d8\u5316\u4e86\uff0c\u4ee5\u53ca\u54ea\u4e9b\u6570\u636e\u53d1\u751f\u53d8\u5316\uff1b\\n3. store\u63a5\u6536\u5230\u901a\u77e5\u540e\uff0c\u5c31\u66f4\u65b0\u4fee\u6539\u6570\u636e\uff0c\u8fd4\u56de\u65b0\u7684\u6570\u636e\u4f20\u9012\u5230\u9876\u5c42\u7ec4\u4ef6\u3002\u518d\u8fdb\u884c\u4e00\u6b21\u81ea\u4e0a\u800c\u4e0b\u7684\u6e32\u67d3\uff0c\u4ece\u800c\u8fbe\u5230\u66f4\u65b0UI\u3002\\n\\nFlux\u662f\u4e00\u79cd\u6570\u636e\u5904\u7406\u7684\u6a21\u5f0f\uff0c\u63cf\u8ff0\u7684\u662f\u5355\u5411\u6570\u636e\u6d41\u7684\u601d\u60f3\u3002\u8ba9\u6570\u636e\u6d41\u53d8\u5f97\u7b80\u5355\uff0c\u65b9\u4fbf\u8c03\u8bd5\u548c\u8ffd\u8e2a\uff0c\u6240\u4ee5\u5b83\u66f4\u9002\u5408\u4e0ereact\u7ed3\u5408\u4f7f\u7528\u3002\\n\\nFlux\u4e2d\uff0c\u5f15\u5165\u7684dispatch\u3001action\u3001store\u548cview\u6a21\u5757\uff0c\u89e6\u53d1action\u65f6\uff0c\u9700\u8981\u4f7f\u7528dispatch\u6765\u8c03\u5ea6\\n\\n## Redux\\n\\nRedux\u662fFLux\u7684\u4e00\u79cd\u5b9e\u73b0\u5f62\u5f0f\uff0c\u4fdd\u7559\u4e86\u6570\u636e\u6d41\u7684\u5355\u5411\u6027\uff0c\u9664\u4e86flux\u539f\u672c\u7684\u51e0\u4e2a\u6a21\u5757\uff0c\u8fd8\u6dfb\u52a0\u4e86reducers\u548cmiddlewares\u3002\\n\\n#### store\\n\\nstore\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u6570\u636e\u5b58\u50a8\u4e2d\u5fc3\uff0c\u8fde\u63a5action\u548c\u7ec4\u4ef6\u3010view\u3011\u3002\u5b83\u63a5\u6536\u7ec4\u4ef6\u4f20\u6765\u7684action\uff0c\u7136\u540e\u6839\u636eaction.type\u548caction.payload\u6765\u5bf9store\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u66f4\u65b0\u3002\u6700\u540estore\u901a\u77e5\u7ec4\u4ef6\u6709\u6570\u636e\u53d8\u5316\u3002\u7ec4\u4ef6\u5c31\u83b7\u53d6\u6700\u5148\u7684\u6570\u636e\uff0c\u6765\u5b8c\u6210\u91cd\u65b0\u65b0\u6e32\u67d3\u3002\\n\\nreducer\u4fee\u6539\u6570\u636e\u540e\uff0c\u5728\u7ec4\u4ef6\u4e2d\u8c03\u7528subscribe\u65b9\u6cd5\uff0csubscribe\u4f20\u5165\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u3002\u5728\u6bcf\u6b21\u8c03\u7528dispatch\u65f6\uff0csubscribe\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u88ab\u89e6\u53d1\uff0c\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86reducer\u4fee\u6539\u6570\u636e\u540e\uff0c\u901a\u77e5\u7ec4\u4ef6\u83b7\u53d6\u6700\u65b0\u6570\u636e\uff0c\u5b9e\u73b0\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002\\n\\n\u5c0f\u603b\u7ed3\u4e00\u4e0b\uff1a\\n\\n1. store\u4e2d\u6570\u636e\u7684\u4fee\u6539\uff0c\u662f\u901a\u8fc7reducer\u6765\u5b8c\u6210\u7684\uff0c\u8c03\u7528dispatch(action)\uff0caction->reducers->store\\n2. store\u63d0\u4f9b\u4e86\u6d88\u606f\u53d1\u5e03\u548c\u8ba2\u9605\u529f\u80fd\uff0c\u6765\u5b9e\u73b0\u8fde\u63a5action\u548c\u7ec4\u4ef6\uff0cdispatch\u89e6\u53d1\u6d88\u606f\u53d1\u5e03\uff0csubscribe\u89e6\u53d1\u6d88\u606f\u8ba2\u9605\u3002\\n\\n#### Reducer\\n\\nreducer\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u7528\u6765\u4fee\u6539store\u6570\u636e\u7684\u3002\u5b83\u6709\u4f18\u52bf\uff1a\u6570\u636e\u62c6\u89e3\u3002\\n\\nredux\u6709\u4e00\u4e2a\u539f\u5219\uff0c\u5c31\u662f\u5355\u4e00\u7684\u6570\u636e\u6e90\uff0c\u6574\u4e2a\u5e94\u7528\uff0c\u53ea\u6709\u4e00\u4e2astore\uff0c\u5b58\u50a8\u7740\u6240\u6709\u7684\u6570\u636e\u3002\u5982\u679c\u4e00\u4e2a\u5e94\u7528\u5b58\u5728\u591a\u4e2a\u5e94\u7528\u7684\u8bdd\uff0c\u5e76\u4e14store\u4e4b\u95f4\u5b58\u5728\u6570\u636e\u5173\u8054\u5173\u7cfb\uff0c\u90a3\u4e48\u5904\u7406\u8d77\u6765\u6bd4\u8f83\u9ebb\u70e6\u3002\\n\\n\u5355\u4e00\u6570\u636e\u6e90\uff0c\u4e5f\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u6570\u636e\u7ed3\u6784\u5d4c\u5957\u592a\u6df1\uff0c\u5bfc\u81f4\u6570\u636e\u8bbf\u95ee\u7e41\u7410\u3002\\n\\n\u6240redux\u63d0\u51fa\u901a\u8fc7\u5b9a\u4e49\u591a\u4e2areducer\u5bf9\u6570\u636e\u8fdb\u884c\u8bbf\u95ee\u548c\u4fee\u6539\uff0c\u6700\u540e\u901a\u8fc7combineReducers\u51fd\u6570\uff0c\u6765\u7ec4\u5408\u6240\u6709\u7684\u6570\u636e\u3002\u6bd4\u5982\uff1a\\n\\n```javascript\\nimport { combineReducers } from \\"redux\\";\\nimport menuReducer from \\"./menu\\";\\nconst reducers = combineReducers({\\n    menus: menuReducer,\\n});\\n\\nexport default reducers\\n```\\n\\n\u8fd9\u5c31\u662fredux\u7684\u6570\u636e\u62c6\u89e3\u3002\\n\\n#### Middleware\\n\\nMiddleware\u662f\u4e2d\u95f4\u4ef6\uff0cMiddleware\u5904\u7406\u5bf9\u8c61\u662faction\uff0c\u901a\u8fc7\u5bf9action\u7684type\u5c5e\u6027\u8fdb\u884c\u5224\u65ad\uff0c\u91c7\u53d6\u4e0d\u540c\u7684\u64cd\u4f5c\u3002\\n\\n## React-redux\\n\\n\u4e3a\u4e86\u8ba9redux\u548creact\u66f4\u597d\u7684\u7ed3\u5408\uff0c\u5c31\u9700\u8981\u5f15\u5165React-redux\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e24\u4e2aAPI\uff1aProvider\u548cconnect\\n\\n#### Provider\\n\\nProvider\u7ec4\u4ef6\u4f5c\u7528\u5c31\u662f\u628a\u552f\u4e00\u7684\u6570\u636e\u6e90store\u4f20\u7ed9\u4efb\u610f\u7ec4\u4ef6\u3002\\n\\n#### connect\\n\\nconnect\u4f5c\u7528\u5c31\u662f\u8ba9\u7ec4\u4ef6\u548cstore\u8fdb\u884c\u5173\u8054\u3002\u9700\u8981\u5b9a\u4e49\u4e24\u4e2a\u51fd\u6570mapStateToProps\u548cmapDispatchToProps\uff0c\u5982\u679c\u4e0d\u60f3\u4f7f\u7528connect\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7useSelector,useDispatch\uff0c\u4e5f\u5c31\u662fReact-redux\u5bf9\u5e94\u7684hooksAPI\uff0c\u6765\u5b8c\u6210\u7ec4\u4ef6\u548cstore\u5173\u8054\u3002"},{"id":"React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","metadata":{"permalink":"/react/React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","source":"@site/react/react202306.md","title":"React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":3.31,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":6,"slug":"React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","title":"React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","tags":["react"]},"prevItem":{"title":"React\uff1aRedux\u548cFlux","permalink":"/react/React\uff1aRedux\u548cFlux"},"nextItem":{"title":"React\uff1a\u5408\u6210\u4e8b\u4ef6","permalink":"/react/React\uff1a\u5408\u6210\u4e8b\u4ef6"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:12:16\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:15:16\\n * @FilePath: /blog/react/react202306.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\n\u6574\u7406\u4e00\u4e9breact\u76f8\u5173\u95ee\u9898\\n\\n### jsx\u548cFiber\u7684\u5173\u7cfb\\njsx\u5c31\u662fJavaScript\u7684\u6269\u5c55\u8bed\u6cd5\uff0c\u662fReact.createElement\u7684\u8bed\u6cd5\u7cd6\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7html\u7684\u683c\u5f0f\u6765\u8868\u73b0\u8282\u70b9\u7ed3\u6784\u548c\u4fe1\u606f\u3002\\n\\nFiber\uff0c\u5c31\u662f\u7528\u6765\u5b58\u50a8\u8282\u70b9\u7684\u4fe1\u606f\u4ee5\u53ca\u8282\u70b9\u7684\u4f18\u5148\u7ea7\u3002\\n\\n\u5728\u521d\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u901a\u8fc7jsx\u5bf9\u8c61\u6765\u8c03\u7528createFiberFromElement\u751f\u6210Fiber\u3002\u5728\u66f4\u65b0\u9636\u6bb5\uff0c\u901a\u8fc7\u5bf9\u6bd4\u65b0\u7684jsx\u548c\u8001\u7684jsx\uff0c\u751f\u6210\u65b0\u7684 Fiber\u6811\u3002\\n\\n### react17\u540e\u53ef\u4ee5\u4e0d\u7528\u5f15\u5165\u201cimport React from \u2018react\u2019\u201d\\n\u4e4b\u524djsx\u901a\u8fc7\u7f16\u8bd1\u540e\uff0c\u53d8\u6210\u4e86React.createElement\uff0c\u8fd9\u6837\u4e0d\u5f15\u5165react\uff0c\u5c31\u4f1a\u62a5\u9519\u3002\\n\\nreact17\u6539\u53d8\u4e86\u7f16\u8bd1\u7684\u65b9\u5f0f\uff0c\u53d8\u6210\u4e86jsx.createElement\u3002\\n\\n### Fiber\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\uff1f\\nFiber\u662f\u4e00\u4e2ajs\u5bf9\u8c61\uff0c\u5305\u542b\u4e86\u8282\u70b9\u4fe1\u606f\u3001\u4f18\u5148\u7ea7\u3001\u66f4\u65b0\u961f\u5217\uff0c\u4e5f\u662f\u4e00\u4e2a\u5de5\u4f5c\u5355\u5143\u3002\\n\\nFiber\u5728\u6784\u5efa\u597dworkInProgress Fiber\u6811\u540e\u5c31\u5207\u6362\u6210current Fiber\uff0c\u5728\u5185\u5b58\u4e2d\u4e00\u6b21\u6027\u5207\u6362\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\\n\\nFiber\u53ef\u4ee5\u4e2d\u65ad\u5f02\u6b65\u66f4\u65b0\uff0c\u4f5c\u4e3a\u5de5\u4f5c\u5355\u5143\uff0c\u53ef\u4ee5\u5728\u65f6\u95f4\u7247\u6bb5\u5185\u6267\u884c\uff0c\u7ed3\u675f\u540e\u8fd8\u6ca1\u6709\u5b8c\u6210\u7684\u5de5\u4f5c\u5c31\u6682\u505c\uff0c\u5728\u4e0b\u6b21\u65f6\u95f4\u7247\u6bb5\u6267\u884c\u4e4b\u524d\u7684\u5de5\u4f5c\uff0c\u6700\u540e\u8fd4\u56deFiber\u3002Fiber\u53ef\u4ee5\u5728\u534f\u8c03\u7684\u65f6\u5019\uff0c\u8fdb\u884c\u5bf9\u5e94\u7684diff\uff0c\u8ba9\u6700\u540e\u7684\u66f4\u65b0\u5e94\u7528\u5230\u771f\u5b9eDOM\u4e0a\u3002\\n\\n\\n### hooks\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u5199\u5728\u6761\u4ef6\u5224\u65ad\u4e2d\\n\u56e0\u4e3ahooks\u662f\u6309\u7167\u987a\u5e8f\u5b58\u50a8\u5728\u94fe\u8868\u4e2d\u7684\uff0c\u5982\u679c\u628ahook\u653e\u5728\u6761\u4ef6\u5224\u65ad\u4e2d\uff0c\u5c31\u4e0d\u65e0\u6cd5\u4fdd\u6301\u94fe\u8868\u7684\u987a\u5e8f\u3002\\n\\n### setState\u662f\u5f02\u6b65\u8fd8\u662f\u540c\u6b65\u7684\\n\u662f\u5f02\u6b65\u7684\uff0c\u56e0\u4e3areact\u628a\u591a\u4e2astate\u5408\u5e76\u66f4\u65b0\u7684\\n\\n### \u4e3a\u4ec0\u4e48\u90e8\u5206\u751f\u547d\u5468\u671f\u51fd\u6570\u6807\u8bb0\u4e86UNSAFE\\n\u65b0\u7684Fiber\u67b6\u6784\u53ef\u4ee5\u5728schedule\u7684\u8c03\u5ea6\u4e0b\u5b9e\u73b0\u6682\u505c\u3001\u7ee7\u7eed\uff0c\u6392\u5217\u4f18\u5148\u7ea7\u3002\u5f53\u4f18\u5148\u7ea7\u9ad8\u7684\u4efb\u52a1\u6253\u65ad\u4e86\u4f18\u5148\u7ea7\u4f4e\u7684\u4efb\u52a1\u65f6\uff0c\u4f18\u5148\u7ea7\u4f4e\u7684\u4eba\u7269\u5c31\u4f1a\u88ab\u8df3\u8fc7\uff0c\u6240\u6709\u7684\u751f\u547d\u5468\u671f\u53ef\u80fd\u6267\u884c\u591a\u6b21\uff0c\\n\\n\u6807\u8bb0UNSAFE\u8868\u793a\u8fd9\u4e9b\u751f\u547d\u5468\u671f\u8fc7\u65f6\uff0c\u4f46\u662f\u4f9d\u7136\u6709\u6548\u3002\\n\\n### React\u5143\u7d20\u7684$$typeof\u5c5e\u6027\\n$$typeof\u5c5e\u6027\uff0c\u8868\u793areact\u5143\u7d20\u7c7b\u578b\uff0c\u662f\u4e00\u4e2asymbol\u7c7b\u578b\\n\\n### React\u662f\u5982\u4f55\u533a\u5206\u7c7b\u7ec4\u4ef6\u548c\u51fd\u6570\u7ec4\u4ef6\u7684\\n\u7c7b\u7ec4\u4ef6prototype\u4e0a\u6709isReactComponent\u5c5e\u6027\\n\\n### \u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u578b\u7684\u76f8\u540c\u4e0e\u4e0d\u540c\\n\u76f8\u540c\u7684\u5730\u65b9\u5c31\u662f\u90fd\u53ef\u4ee5\u63a5\u6536props\u548c\u8fd4\u56dereact\u5143\u7d20\u3002\\n\\n\u7c7b\u7ec4\u4ef6\u662f\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\uff0c\u9700\u8981\u521b\u5efa\u5b9e\u4f8b\u5e76\u4e14\u4fdd\u5b58\u5b9e\u4f8b\uff0c\u5360\u7528\u4e86\u4e00\u5b9a\u7684\u5185\u5b58\uff1b\\n\\n\u51fd\u6570\u7ec4\u4ef6\uff0c\u4e0d\u7528\u521b\u5efa\u5b9e\u4f8b\uff0c\u76f4\u63a5\u8f93\u5165\u8fd4\u56de\u8f93\u51fa\uff0c\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b"},{"id":"React\uff1a\u5408\u6210\u4e8b\u4ef6","metadata":{"permalink":"/react/React\uff1a\u5408\u6210\u4e8b\u4ef6","source":"@site/react/react202307.md","title":"React\uff1a\u5408\u6210\u4e8b\u4ef6","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":3.815,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":7,"slug":"React\uff1a\u5408\u6210\u4e8b\u4ef6","title":"React\uff1a\u5408\u6210\u4e8b\u4ef6","tags":["react"]},"prevItem":{"title":"React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898","permalink":"/react/React\uff1a\u5173\u4e8ereact\u7684\u4e00\u4e9b\u95ee\u9898"},"nextItem":{"title":"React\uff1aHooks\u5de5\u4f5c\u673a\u5236","permalink":"/react/React\uff1aHooks\u5de5\u4f5c\u673a\u5236"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:13:17\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:15:21\\n * @FilePath: /blog/react/react202307.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\n\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-02-17 17:29:32\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-02-17 23:17:15\\n * @FilePath: \\\\blog\\\\docs\\\\react\\\\react202302171729.md\\n * @Description: \\n * Copyright (c) 2023 by ${git_name} email: ${git_email}, All Rights Reserved.\\n--\x3e\\n\\n## \u5408\u6210\u4e8b\u4ef6\\n\\nReact\u6709\u81ea\u5df1\u4e00\u5957\u72ec\u7acb\u7684\u4e8b\u4ef6\u7cfb\u7edf\uff0c\u5c31\u662f\u5408\u6210\u4e8b\u4ef6\uff0c\u5b83\u6a21\u62df\u539f\u751f\u4e8b\u4ef6\u6240\u6709\u7684\u529f\u80fd\u3002\u6839\u636eW3C\u89c4\u8303\u6765\u5b9a\u4e49\u5408\u6210\u4e8b\u4ef6\uff0c\u517c\u5bb9\u4e86\u6240\u6709\u7684\u6d4f\u89c8\u5668\uff0c\u62e5\u6709\u548c\u6d4f\u89c8\u5668\u539f\u751f\u4e8b\u4ef6\u76f8\u540c\u7684\u63a5\u53e3\u3002\\n\\n\u5728react\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7e.nativeEvent\u83b7\u53d6\u5230DOM\u4e8b\u4ef6\uff0c\u6bd4\u5982\uff1a`<div onClick={(e)=>{console.log(e.nativeEvent)}}>\u70b9\u51fb</div>`\u3002\\n\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/68b43d4d2fac449b9abdbda00caa79ac.png)\\n\\n\u5408\u6210\u4e8b\u4ef6\u7684\u76ee\u7684\u662f\uff1a\\n\\n1. \u5b9e\u73b0\u6d4f\u89c8\u5668\u517c\u5bb9\uff0c\u65b9\u4fbf\u8de8\u5e73\u53f0\u3002react\u91c7\u53d6\u9876\u5c42\u4e8b\u4ef6\u673a\u5236\uff0c\u4fdd\u8bc1\u4e8b\u4ef6\u5192\u6ce1\u4e00\u81f4\u6027\uff0c\u53ef\u4ee5\u8de8\u6d4f\u89c8\u5668\u6267\u884c\u3002\u628a\u4e0d\u540c\u5e73\u53f0\u4e8b\u4ef6\uff0c\u6a21\u62df\u5408\u6210\u4e8b\u4ef6\u3002\\n2. \u65b9\u4fbf\u4e8b\u4ef6\u7edf\u4e00\u7ba1\u7406\u548c\u4e8b\u52a1\u673a\u5236\u3002\\n\\n## DOM\u539f\u751f\u4e8b\u4ef6\\n\\n\u4e8b\u4ef6\u6d41\uff1a\u9875\u9762\u4e2d\u7ed1\u5b9a\u4e86\u5f88\u591a\u7684\u4e8b\u4ef6\uff0c\u800c\u9875\u9762\u63a5\u6536\u4e8b\u4ef6\u7684\u987a\u5e8f\u5c31\u662f\u4e8b\u4ef6\u6d41\u3002\\n\\n\u4e8b\u4ef6\u4f20\u64ad\u5927\u81f4\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a\\n\\n1. \u4e8b\u4ef6\u6355\u83b7\u9636\u6bb5\\n2. \u76ee\u6807\u9636\u6bb5\\n3. \u4e8b\u4ef6\u5192\u6ce1\u9636\u6bb5\\n\\n\u9996\u5148\uff0c\u5f53\u4e00\u4e2a\u4e8b\u4ef6\u88ab\u89e6\u53d1\u7684\u65f6\u5019\uff0c\u9876\u5c42\u5bf9\u8c61\u53d1\u51fa\u4e00\u4e2a\u4e8b\u4ef6\u6d41\uff0c\u4e00\u76f4\u6d41\u5411\u76ee\u6807\u8282\u70b9\uff0c\u76f4\u5230\u4e8b\u4ef6\u771f\u6b63\u53d1\u751f\u7684\u76ee\u6807\u5143\u7d20\uff1b\u5230\u8fbe\u76ee\u6807\u5143\u7d20\u540e\uff0c\u5c31\u6267\u884c\u76ee\u6807\u5143\u7d20\u8be5\u4e8b\u4ef6\u5bf9\u5e94\u7684\u5904\u7406\u903b\u8f91\uff1b\\n\\n\u4e8b\u4ef6\u5192\u6ce1\u5c31\u662f\u4e8b\u4ef6\u4ece\u76ee\u6807\u5143\u7d20\u5f00\u59cb\uff0c\u5f80\u9876\u5c42\u5143\u7d20\u4f20\u64ad\uff0c\u9014\u4e2d\u9047\u5230\u8282\u70b9\u7ed1\u5b9a\u7684\u4e8b\u4ef6\uff0c\u5c31\u4f1a\u89e6\u53d1\u4e00\u6b21\u3002\u5982\u679c\u9700\u8981\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\u7684\u8bdd\uff0c\u5c31\u4f7f\u7528e.stopPropagation()\u6765\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\u3002\\n\\n\u4e8b\u4ef6\u4ee3\u7406\uff1a\u628a\u54cd\u5e94\u4e8b\u4ef6\u59d4\u6258\u5230\u4e00\u4e2a\u5143\u7d20\u4e0a\uff0c\u5f53\u5b50\u5143\u7d20\u89e6\u53d1\u4e8b\u4ef6\u7684\u65f6\u5019\uff0c\u4e8b\u4ef6\u5c31\u5411\u4e0a\u5192\u6ce1\uff0c\u7236\u8282\u70b9\u83b7\u53d6\u5230\u4e8b\u4ef6\u540e\uff0c\u518d\u5224\u65ad\u662f\u5426\u662f\u5bf9\u5e94\u8282\u70b9\u7684\u4e8b\u4ef6\uff0c\u7136\u540e\u8fdb\u884c\u5904\u7406\u3002\u4e8b\u4ef6\u4ee3\u7406\u7684\u4f18\u70b9\u5728\u4e8e\u5b83\u53ef\u4ee5\u51cf\u5c11\u5185\u5b58\u6d88\u8017\u548c\u52a8\u6001\u7ed1\u5b9a\u4e8b\u4ef6\u3002\\n\\n## \u539f\u751f\u4e8b\u4ef6\u548c\u5408\u6210\u4e8b\u4ef6\u533a\u522b\\n\\n1. \u4e8b\u4ef6\u547d\u540d\u65b9\u5f0f\u4e0d\u540c\uff0c\u539f\u751f\u4e8b\u4ef6\u547d\u540d\u7eaf\u5c0f\u5199\uff0creact\u4e8b\u4ef6\u547d\u540d\u65b9\u5f0f\u662f\u5c0f\u9a7c\u5cf0\uff0c\u6bd4\u5982onClick\uff1b\\n2. \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e0d\u4e00\u6837\uff0c\u539f\u751f\u4e8b\u4ef6\u7684\u5904\u7406\u51fd\u6570\u4e3a\u5b57\u7b26\u4e32\uff0c\u5728react\u4e2d\uff0c\u662f\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff1b\\n3. \u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a\u4e0d\u4e00\u6837\uff0c\u539f\u751f\u4e8b\u4ef6\u53ef\u4ee5\u901a\u8fc7\u8fd4\u56defalse\u6765\u963b\u6b62\u4e8b\u4ef6\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\u5728react\u4e2d\uff0c\u9700\u8981\u4f7f\u7528preventDefault()\u65b9\u6cd5\u6765\u963b\u6b62\u4e8b\u4ef6\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\\n\\nreact\u5408\u6210\u4e8b\u4ef6\uff0c\u662f\u4ee5\u4e8b\u4ef6\u59d4\u6258\u7684\u65b9\u5f0f\u7ed1\u5b9a\u5728\u7ec4\u4ef6\u6700\u4e0a\u5c42\u3002\u5e76\u4e14\u5728\u7ec4\u4ef6\u5378\u8f7d\u9636\u6bb5\u4f1a\u81ea\u52a8\u9500\u6bc1\u3002\\n\\nreact\u7684\u6240\u6709\u4e8b\u4ef6\u90fd\u662f\u7ed1\u5b9a\u5728document\u4e0a\u3010react17\u4e4b\u540e\uff0c\u4e8b\u4ef6\u662f\u7ed1\u5b9a\u5728root\u5bb9\u5668\u4e0a\u3011\uff0c\u5f53\u771f\u5b9eDOM\u5143\u7d20\u4e0a\u89e6\u53d1\u4e8b\u4ef6\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5192\u6ce1\u5230document\u6216\u8005\u662froot\u5bb9\u5668\u4e0a\u3002\u7136\u540e\u518d\u6765\u5904\u7406react\u4e8b\u4ef6\uff1b"},{"id":"React\uff1aHooks\u5de5\u4f5c\u673a\u5236","metadata":{"permalink":"/react/React\uff1aHooks\u5de5\u4f5c\u673a\u5236","source":"@site/react/react202308.md","title":"React\uff1aHooks\u5de5\u4f5c\u673a\u5236","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":9.875,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":8,"slug":"React\uff1aHooks\u5de5\u4f5c\u673a\u5236","title":"React\uff1aHooks\u5de5\u4f5c\u673a\u5236","tags":["react"]},"prevItem":{"title":"React\uff1a\u5408\u6210\u4e8b\u4ef6","permalink":"/react/React\uff1a\u5408\u6210\u4e8b\u4ef6"},"nextItem":{"title":"Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","permalink":"/react/Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:14:05\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:15:25\\n * @FilePath: /blog/react/react202308.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\n\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-02-18 18:26:05\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-02-18 19:20:33\\n * @FilePath: \\\\blog\\\\docs\\\\react\\\\react202302181826.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n## Hooks\u89c4\u5219\\n\\nReact Hooks\u7684\u4f7f\u7528\uff0c\u6709\u4e24\u4e2a\u89c4\u5219\uff1a\\n\\n1. Hooks\u53ea\u80fd\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528\uff1b\\n2. \u4e0d\u80fd\u5728\u6761\u4ef6\u3001\u5faa\u73af\u6216\u8005\u5d4c\u5957\u51fd\u6570\u4e2d\u4f7f\u7528hook\u3002\u786e\u4fdd\u6bcf\u4e00\u6b21\u6e32\u67d3\u4e2d\u90fd\u6309\u7167\u540c\u6837\u7684\u987a\u5e8f\u88ab\u8c03\u7528\uff0c\\n\\n```javascript\\nimport React, { useState } from \\"react\\";\\nexport default function PersonalInfoComponent() {\\n  const [name, setName] = useState(\\"\u8bfb\u5fc3\u60a6\\");\\n  const [career, setCareer] = useState(\\"\u524d\u7aef\\");\\n  return (\\n    <div className=\\"personalInfo\\">\\n      <p>\u59d3\u540d\uff1a{name}</p>\\n      <p>\u804c\u4e1a\uff1a{career}</p>\\n      <button\\n        onClick={() => {\\n          setName(\\"duxinyues\\");\\n        }}\\n      >\\n        \u4fee\u6539\u59d3\u540d\\n      </button>\\n    </div>\\n  );\\n}\\n```\\n\\n\u8fd9\u4e00\u6bb5\u4ee3\u7801\u4e2d\u7684hook\u662f\u6309\u7167\u6b63\u5e38\u7684\u987a\u5e8f\u6765\u6267\u884c\u7684\uff0c\u73b0\u5728\u628ahook\u653e\u5230\u6761\u4ef6\u8bed\u53e5\u4e2d\uff1a\\n\\n```javascript\\nimport React, { useState } from \\"react\\";\\n\\nlet isMounted = false;\\nexport default function PersonalInfoComponent() {\\n  let name,  career, setName;\\n  console.log(\\"isMounted\\", isMounted);\\n\\n  if (!isMounted) {\\n    // eslint-disable-next-line\\n    [name, setName] = useState(\\"\u8bfb\u5fc3\u60a6\\");\\n    // if \u5185\u90e8\u7684\u903b\u8f91\u6267\u884c\u4e00\u6b21\u540e\uff0c\u5c31\u5c06 isMounted \u7f6e\u4e3a true\uff08\u8bf4\u660e\u5df2\u6302\u8f7d\uff0c\u540e\u7eed\u90fd\u4e0d\u518d\u662f\u9996\u6b21\u6e32\u67d3\u4e86\uff09\\n    isMounted = true;\\n  }\\n  [career] = useState(\\"\u524d\u7aef\u5f00\u53d1\\");\\n  console.log(\\"career\\", career);\\n\\n  return (\\n    <div className=\\"personalInfo\\">\\n      <p>\u59d3\u540d\uff1a{name}</p>\\n     \\n      <p>\u804c\u4e1a\uff1a{career}</p>\\n      <button\\n        onClick={() => {\\n          setName(\\"duxinyues\\");\\n        }}\\n      >\\n        \u4fee\u6539\u59d3\u540d\\n      </button>\\n    </div>\\n  );\\n}\\n```\\n\\n\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5728\u9996\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u662f\u53ef\u4ee5\u6b63\u5e38\u663e\u793a\u3002\u5f53\u6211\u4eec\u70b9\u51fb\u4fee\u6539\u6309\u94ae\u540e\uff0creact\u5c31\u4f1a\u63d0\u793a\u62a5\u9519\uff1a\\n\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/53d066d4fdb84aba81a59111bf921dd4.png)\\n\\n\u4ece\u63a7\u5236\u53f0\u4e2d\u770b\u51fa\uff0c\u6211\u4eec\u660e\u660e\u4fee\u6539\u7684\u662fname\uff0c\u6700\u540e\u66f4\u65b0\u7684\u786e\u5b9ecareer\uff0c\u8fd9\u5c31\u662f\u8fdd\u53cd\u89c4\u5219\u7684\u540e\u679c\uff0c\u4f1a\u9020\u6210hooks\u72b6\u6001\u7d0a\u4e71\u3002\\n\\n## Hooks\u673a\u5236\\n\\n\u4ece\u6e90\u7801\u4e2d\uff0c\u770b\u4e00hooks\u7684\u6e90\u7801\uff0c\u5176\u4e2d\u6709\u4e00\u4e2aDispatcher\uff0c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4e0d\u540c\u7684hook\u8c03\u7528\u7684\u51fd\u6570\u4e0d\u540c\u3002\\n\u5168\u5c40\u53d8\u91cfReactCurrentDispatcher.current\u7684\u8d4b\u503c\u662f\u901a\u8fc7\u5224\u65ad\u662f\u9996\u6b21\u6e32\u67d3\u8fd8\u662f\u66f4\u65b0\u9636\u6bb5\u8d4b\u4e0d\u540c\u7684\u503c\uff1a\\n\\n\u6e90\u7801\u6587\u4ef6ReactFiberHooks.old.js\\n\\n```javascript\\n    ReactCurrentDispatcher.current =\\n      current === null || current.memoizedState === null\\n        ? HooksDispatcherOnMount\\n        : HooksDispatcherOnUpdate;\\n```\\n\\nhooks\u5728\u9996\u6b21\u6e32\u67d3\u548c\u66f4\u65b0\u9636\u6bb5\u662f\u6267\u884c\u4e0d\u540c\u7684\u903b\u8f91\u3002\\n\\nHooksDispatcherOnMount\u4ee3\u7801\uff1a\\n\\n```javascript\\nconst HooksDispatcherOnMount: Dispatcher = {\\n  readContext,\\n\\n  useCallback: mountCallback,\\n  useContext: readContext,\\n  useEffect: mountEffect,\\n  useImperativeHandle: mountImperativeHandle,\\n  useLayoutEffect: mountLayoutEffect,\\n  useInsertionEffect: mountInsertionEffect,\\n  useMemo: mountMemo,\\n  useReducer: mountReducer,\\n  useRef: mountRef,\\n  useState: mountState,\\n  useDebugValue: mountDebugValue,\\n  useDeferredValue: mountDeferredValue,\\n  useTransition: mountTransition,\\n  useMutableSource: mountMutableSource,\\n  useSyncExternalStore: mountSyncExternalStore,\\n  useslug: mountId,\\n\\n  unstable_isNewReconciler: enableNewReconciler,\\n};\\n```\\n\\nHooksDispatcherOnUpdate\u4ee3\u7801\uff1a\\n\\n```javascript\\nconst HooksDispatcherOnUpdate: Dispatcher = {\\n  readContext,\\n\\n  useCallback: updateCallback,\\n  useContext: readContext,\\n  useEffect: updateEffect,\\n  useImperativeHandle: updateImperativeHandle,\\n  useInsertionEffect: updateInsertionEffect,\\n  useLayoutEffect: updateLayoutEffect,\\n  useMemo: updateMemo,\\n  useReducer: updateReducer,\\n  useRef: updateRef,\\n  useState: updateState,\\n  useDebugValue: updateDebugValue,\\n  useDeferredValue: updateDeferredValue,\\n  useTransition: updateTransition,\\n  useMutableSource: updateMutableSource,\\n  useSyncExternalStore: updateSyncExternalStore,\\n  useslug: updateId,\\n\\n  unstable_isNewReconciler: enableNewReconciler,\\n};\\n```\\n\\n### useState\u521d\u6b21\u6e32\u67d3\\n\\n\u5148\u770b\u4e00\u4e0buseState\u7684\u6e90\u7801\uff1a\\n\\n```javascript\\nexport function useState<S>(\\n  initialState: (() => S) | S,\\n): [S, Dispatch<BasicStateAction<S>>] {\\n  const dispatcher = resolveDispatcher();\\n  return dispatcher.useState(initialState);\\n}\\n```\\n\\n\u5728\u6e90\u7801\u4e2d\u5b9a\u4e49\u6bd4\u8f83\u7b80\u5355\uff0c\u5148\u83b7\u53d6\u5f53\u524d\u7684dispatcher\uff0c\u518d\u8ffd\u6eaf\u5230resolveDispatcher\u65b9\u6cd5\uff0c\u5b83\u7684\u6e90\u7801\u4e3a\uff1a\\n\\n```javascript\\nfunction resolveDispatcher() {\\n  const dispatcher = ReactCurrentDispatcher.current;\\n  if (__DEV__) {\\n    if (dispatcher === null) {\\n     ....\\n  }\\n  return ((dispatcher: any): Dispatcher);\\n}\\n```\\n\\nuseState\u5728\u9996\u6b21\u6e32\u67d3\uff0c\u6267\u884c\u7684\u662fHooksDispatcherOnMount.useState\uff0c\u4e5f\u5c31\u662fmountState\u65b9\u6cd5\u3002\u518d\u6765\u770b\u4e00\u4e0bmountState\u51fd\u6570\u7684\u6e90\u7801\uff1a\\n\\n```javascript\\nfunction mountState<S>(\\n  initialState: (() => S) | S,\\n): [S, Dispatch<BasicStateAction<S>>] {\\n  // \u5c06hook\u8ffd\u52a0\u5230\u94fe\u8868\u5c3e\u90e8\\n  const hook = mountWorkInProgressHook();\\n  if (typeof initialState === \'function\') {\\n    // initialState\u662f\u56de\u8c03\u51fd\u6570\u7684\u6216=\u8bdd\uff0c\u5c31\u83b7\u53d6\u56de\u8c03\u51fd\u6570\u6267\u884c\u7684\u8fd4\u56de\u503c\\n    initialState = initialState();\\n  }\\n  // \u628ainitialState\u4fdd\u5b58\u4e0b\u6765\\n  hook.memoizedState = hook.baseState = initialState;\\n  const queue: UpdateQueue<S, BasicStateAction<S>> = {\\n    pending: null,\\n    interleaved: null,\\n    lanes: NoLanes, // \u4f18\u5148\u7ea7\\n    dispatch: null,\\n    lastRenderedReducer: basicStateReducer,\\n    lastRenderedState: (initialState: any),\\n  };\\n  hook.queue = queue;\\n  const dispatch: Dispatch<\\n    BasicStateAction<S>,\\n  > = (queue.dispatch = (dispatchSetState.bind(\\n    null,\\n    currentlyRenderingFiber,\\n    queue,\\n  ): any));\\n  return [hook.memoizedState, dispatch];\\n}\\n```\\n\\nmountState\u51fd\u6570\u4e3b\u8981\u662f\u4e3a\u4e86\u521d\u59cb\u5316hook\u3002\u518d\u4ecemountWorkInProgressHook\u65b9\u6cd5\u4e2d\uff0c\u4e86\u89e3\u4e00\u4e0bhook\u7684\u6570\u636e\u7ed3\u6784\u3002\u6e90\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction mountWorkInProgressHook(): Hook {\\n  const hook: Hook = {\\n    memoizedState: null, // \u4e0d\u540c\u7684hook\uff0c\u6709\u4e0d\u540c\u7684\u503c\\n\\n    baseState: null, // \u521d\u59cbstate\\n    baseQueue: null, // \u521d\u59cb\u961f\u5217\\n    queue: null, // \u9700\u8981\u66f4\u65b0\u7684\u961f\u5217\\n\\n    next: null, // \u4e0b\u4e00\u4e2ahook\\n  };\\n\\n  if (workInProgressHook === null) {\\n    // This is the first hook in the list\\n    currentlyRenderingFiber.memoizedState = workInProgressHook = hook;\\n  } else {\\n    // Append to the end of the list\\n    workInProgressHook = workInProgressHook.next = hook;\\n  }\\n  return workInProgressHook;\\n}\\n```\\n\\nhook\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u662f\u4fdd\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0chook\u5bf9\u8c61\u4e4b\u95f4\u662f\u4ee5\u5355\u5411\u94fe\u8868\u7684\u5f62\u5f0f\u8fde\u63a5\u3002hook\u5219\u662f\u4fdd\u5b58\u5728Fiber\u7684memoizedState\u4e0a\uff0c\u9700\u8981\u66f4\u65b0\u7684\u662f\u4fdd\u5b58\u5728hook.queue.pending\u4e2d\u3002\\n\\n\u73b0\u5728\u53ef\u4ee5\u770b\u51fa\uff0c\u7ec4\u4ef6\u6240\u6709\u7684hook\u4e4b\u95f4\u662f\u4ee5\u5355\u5411\u94fe\u8868\u5f62\u5f0f\u4e32\u8054\uff0c\u73af\u73af\u76f8\u6263\u3002\u5982\u679c\u94fe\u8868\u4e0a\u7684\u67d0\u4e00\u4e2ahook\u4e22\u5931\u4e86\uff0c\u90a3\u4e48\u94fe\u8868\u7684\u987a\u5e8f\u5c31\u53d1\u751f\u53d8\u5316\uff0c\u94fe\u8868\u4e0a\u7684hook\u4e0e\u4e4b\u524d\u5c31\u4e0d\u80fd\u610f\u4e49\u5bf9\u5e94\uff0c\u4ece\u800c\u5bfc\u81f4hook\u72b6\u6001\u7d0a\u4e71\u3002\\n\\n### useState\u66f4\u65b0\u6e32\u67d3\\n\\n\u5728\u66f4\u65b0\u9636\u6bb5\uff0c\u4f7f\u7528\u7684dispatcher\u662fHooksDispatcherOnUpdate\u3002\u6211\u4eec\u5728\u7ec4\u4ef6\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662fuseState\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u8c03\u7528HooksDispatcherOnUpdate.useState\uff0c\u4e5f\u5c31\u662fupdateState\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction updateState<S>(\\n  initialState: (() => S) | S,\\n): [S, Dispatch<BasicStateAction<S>>] {\\n  return updateReducer(basicStateReducer, (initialState: any));\\n}\\n```\\n\\n\u5728\u6e90\u7801\u4e2d\uff0cuseState\u548cuseReducer\u662f\u590d\u7528\u4e00\u5957\u66f4\u65b0\u673a\u5236\uff0c\u7531\u4e8euseReducer\u7684\u4ee3\u7801\u6709\u70b9\u591a\uff0c\u5c31\u4e0d\u8d34\u51fa\u6765\u4e86\u3002\\n\\nupdateState\u5c31\u662f\u6309\u7167\u987a\u5e8f\u904d\u5386\u4e4b\u524d\u5df2\u7ecf\u6784\u5efa\u597d\u4e86\u7684\u94fe\u8868\uff0c\u53d6\u51fa\u5bf9\u5e94\u7684\u6570\u636e\u4fe1\u606f\u8fdb\u884c\u66f4\u65b0\u3002\\n\\n\u5c0f\u603b\u7ed3\uff1a\\n`mountState`\uff08\u9996\u6b21\u6e32\u67d3\uff09\u6784\u5efa\u94fe\u8868\u5e76\u4e14\u6e32\u67d3\uff1b\\n`updateState`\uff08\u66f4\u65b0\u6e32\u67d3\uff09\u4e00\u6b21\u904d\u5386\u94fe\u8868\u5e76\u4e14\u6e32\u67d3\uff1b\\n\\n### useEffect\u521d\u6b21\u6e32\u67d3\\n\\n\u6e90\u7801\u4e2duseEffect\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a\\n\\n```javascript\\nexport function useEffect(\\n  create: () => (() => void) | void,\\n  deps: Array<mixed> | void | null,\\n): void {\\n  const dispatcher = resolveDispatcher();\\n  return dispatcher.useEffect(create, deps);\\n}\\n```\\n\\n\u5728\u521d\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662fmountEffect\uff0cmountEffect\u53c8\u8c03\u7528\u7684\u662fmountEffectImpl\uff0cmountEffectImpl\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction mountEffectImpl(fiberFlags, hookFlags, create, deps): void {\\n  const hook = mountWorkInProgressHook(); //\u83b7\u53d6\u94fe\u8868\\n  const nextDeps = deps === undefined ? null : deps; // \u4f9d\u8d56\\n  currentlyRenderingFiber.flags |= fiberFlags; // \u6dfb\u52a0flag\\n  hook.memoizedState = pushEffect(\\n    HookHasEffect | hookFlags,\\n    create,\\n    undefined,\\n    nextDeps,\\n  );\\n}\\n```\\n\\nmountEffect\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction mountEffect(\\n  create: () => (() => void) | void,\\n  deps: Array<mixed> | void | null,\\n): void {\\n  if (\\n    __DEV__ &&\\n    enableStrictEffects &&\\n    (currentlyRenderingFiber.mode & StrictEffectsMode) !== NoMode\\n  ) {\\n    return mountEffectImpl(\\n      MountPassiveDevEffect | PassiveEffect | PassiveStaticEffect,\\n      HookPassive,\\n      create,\\n      deps,\\n    );\\n  } else {\\n    return mountEffectImpl(\\n      PassiveEffect | PassiveStaticEffect,\\n      HookPassive,\\n      create,\\n      deps,\\n    );\\n  }\\n}\\n```\\n\\n\u5728\u9996\u6b21\u6e32\u67d3\uff0cuseEffect\u4e5f\u662f\u4fdd\u5b58\u5728hook.memoizedState\u4e0a\u7684\u3002\\n\\n### useEffect\u66f4\u65b0\u9636\u6bb5\\n\\n\u5728\u66f4\u65b0\u9636\u6bb5\uff0c\u8c03\u7528\u7684\u662fupdateEffect\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction updateEffect(\\n  create: () => (() => void) | void,\\n  deps: Array<mixed> | void | null,\\n): void {\\n  return updateEffectImpl(PassiveEffect, HookPassive, create, deps);\\n}\\n\\nfunction updateEffectImpl(fiberFlags, hookFlags, create, deps): void {\\n  const hook = updateWorkInProgressHook();\\n  const nextDeps = deps === undefined ? null : deps;\\n  let destroy = undefined;\\n\\n  if (currentHook !== null) {\\n    const prevEffect = currentHook.memoizedState;\\n    destroy = prevEffect.destroy;\\n    if (nextDeps !== null) {\\n      const prevDeps = prevEffect.deps;\\n      if (areHookInputsEqual(nextDeps, prevDeps)) {\\n        hook.memoizedState = pushEffect(hookFlags, create, destroy, nextDeps);\\n        return;\\n      }\\n    }\\n  }\\n\\n  currentlyRenderingFiber.flags |= fiberFlags;\\n\\n  hook.memoizedState = pushEffect(\\n    HookHasEffect | hookFlags,\\n    create,\\n    destroy,\\n    nextDeps,\\n  );\\n}\\n```\\n\\n\u6d45\u6bd4\u8f83\u4f9d\u8d56\uff0c\u5982\u679c\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u91cd\u65b0\u6267\u884c\u4e86\u3002\\n\\n### useRef\\n\\nuseRef\u5728\u9996\u6b21\u6e32\u67d3\uff0c\u8c03\u7528\u7684\u662fmountRef\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nfunction mountRef<T>(initialValue: T): {|current: T|} {\\n    const hook = mountWorkInProgressHook(); // \u83b7\u53d6useRef\\n    const ref = {current: initialValue}; //\u521d\u59cb\u5316ref\\n    hook.memoizedState = ref;\\n    return ref;\\n}\\n```\\n\\n\u5728render\u7684\u65f6\u5019\uff0c\u5e26\u6709ref\u5c5e\u6027\u7684Fiber\u5c31\u4f1a\u6807\u8bb0\u4e0aRef tag\u3002\\n\\n\u66f4\u65b0\u9636\u6bb5\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662fupdateRef\uff0c\u7136\u540e\u8fd4\u56dehook\u94fe\u8868\u3002\\n\\n```javascript\\nfunction updateRef<T>(initialValue: T): {|current: T|} {\\n  const hook = updateWorkInProgressHook();\\n  return hook.memoizedState;\\n}\\n```\\n\\n### useMemo & useCallback\\n\\n\u9996\u6b21\u6e32\u67d3useCallback\u548cuseMemo\u7684\u6e90\u7801\uff1a\\n\\n```javascript\\nfunction mountMemo<T>(\\n  nextCreate: () => T,\\n  deps: Array<mixed> | void | null,\\n): T {\\n  const hook = mountWorkInProgressHook();\\n  const nextDeps = deps === undefined ? null : deps;\\n  const nextValue = nextCreate();\\n  hook.memoizedState = [nextValue, nextDeps];\\n  return nextValue;\\n}\\n\\nfunction mountCallback<T>(callback: T, deps: Array<mixed> | void | null): T {\\n  const hook = mountWorkInProgressHook();\\n  const nextDeps = deps === undefined ? null : deps;\\n  hook.memoizedState = [callback, nextDeps];\\n  return callback;\\n}\\n```\\n\\n\u5b83\u4eec\u7684\u533a\u522b\u662f\u5728memoizedState\u4e0a\u5b58\u50a8\u7684\u662fcallback\u8fd8\u662fvalue\u3002\\n\\n\u66f4\u65b0\u9636\u6bb5\u7684\u6e90\u7801\uff1a\\n\\n```javascript\\nfunction updateMemo<T>(\\n  nextCreate: () => T,\\n  deps: Array<mixed> | void | null,\\n): T {\\n  const hook = updateWorkInProgressHook();\\n  const nextDeps = deps === undefined ? null : deps;\\n  const prevState = hook.memoizedState;\\n  if (prevState !== null) {\\n    // Assume these are defined. If they\'re not, areHookInputsEqual will warn.\\n    if (nextDeps !== null) {\\n      const prevDeps: Array<mixed> | null = prevState[1];\\n      if (areHookInputsEqual(nextDeps, prevDeps)) {\\n        return prevState[0];\\n      }\\n    }\\n  }\\n  const nextValue = nextCreate();\\n  hook.memoizedState = [nextValue, nextDeps];\\n  return nextValue;\\n}\\n\\nfunction updateCallback<T>(callback: T, deps: Array<mixed> | void | null): T {\\n  const hook = updateWorkInProgressHook();\\n  const nextDeps = deps === undefined ? null : deps;\\n  const prevState = hook.memoizedState;\\n  if (prevState !== null) {\\n    if (nextDeps !== null) {\\n      const prevDeps: Array<mixed> | null = prevState[1];\\n      if (areHookInputsEqual(nextDeps, prevDeps)) {\\n        return prevState[0];\\n      }\\n    }\\n  }\\n  hook.memoizedState = [callback, nextDeps];\\n  return callback;\\n}\\n```\\n\\n\u8fd9\u5c31\u662f\u5e38\u7528\u5230\u7684hooks\u7684\u6e90\u7801\u4ee5\u53ca\u7b80\u5355\u89e3\u6790\u3002"},{"id":"Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","metadata":{"permalink":"/react/Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","source":"@site/react/react202309.md","title":"Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":2.63,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":9,"slug":"Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","title":"Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","tags":["react"]},"prevItem":{"title":"React\uff1aHooks\u5de5\u4f5c\u673a\u5236","permalink":"/react/React\uff1aHooks\u5de5\u4f5c\u673a\u5236"},"nextItem":{"title":"Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6","permalink":"/react/Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:17:32\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:18:49\\n * @FilePath: /blog/react/react202309.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\nRedux\u7684\u6838\u5fc3\u662fstore\uff0cstore\u4f5c\u4e3a\u5e94\u7528\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u4fdd\u5b58\u7740\u8fd9\u4e2a\u9875\u9762\u7684\u72b6\u6001\u6570\u636e\u6811\u3002\\n\\n## store\\n\\n\u4f46\u662fstore\u672c\u8d28\u4e0a\u662f\u4e00\u4e2aJavaScript\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u542b\u6709\u4e86dispatch\u4ee5\u53ca\u83b7\u53d6\u9875\u9762\u72b6\u6001\u6570\u636e\u7684\u65b9\u6cd5\u7b49\u7b49\u3002\\n\\n\\nstore\u63d0\u4f9b\u51e0\u4e2a\u65b9\u6cd5\u7ed9\u5f00\u53d1\u8005\u8c03\u7528\uff1a\\n\\n1. dispatch(action)\uff1a\u6d3e\u53d1action\uff1b\\n2. subscribe(listener)\uff1a\u8ba2\u9605\u9875\u9762\u72b6\u6001\u6570\u636e\uff0c\u4e5f\u5c31\u662fstore\u4e2d\u7684state\uff1b\\n3. getState\uff1a\u83b7\u53d6\u5f53\u524d\u9875\u9762\u72b6\u6001\u6570\u636e\u6811\uff1b\\n4. replaceReducer(nextReducer)\uff1a\u8fd9\u4e2a\u65b9\u6cd5\u5f88\u5c11\u4f7f\u7528\u5230\u3002\\n\\n\u5f53\u5e94\u7528\u5f15\u5165Redux\u540e\uff0c\u901a\u8fc7redux.createStore\u65b9\u6cd5\u6765\u521b\u5efa\u5e94\u7528\u7684store\uff0c\u8fd9\u5c31\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u4f8b\u3002\u6bd4\u5982\uff1a\\n\\n```js\\n\\timport {createStore}  from  \'redux\';\\n\\tconst store = createStore(reducer,preloadedState,enhancer);\\n```\\n\\n\u53c2\u6570reducer\u662f\u5fc5\u4f20\u53c2\u6570\uff0c\u521b\u5efastore\u7684\u540c\u65f6\uff0c\u4e5f\u5fc5\u987b\u5b9a\u4e49\u597dreducer\u51fd\u6570\uff0c\u901a\u8fc7reducer\u51fd\u6570\uff0c\u6765\u901a\u77e5store\u6570\u636e\u72b6\u6001\u662f\u5982\u4f55\u6839\u636eaction\u6765\u8fdb\u884c\u66f4\u65b0\u7684\u3002\\n\\npreloadedState\uff1a\u662f\u5e94\u7528\u7684\u521d\u59cb\u72b6\u6001\u3002\\n\\n## action\\n\\naction\u662f\u63cf\u8ff0\u4e86\u72b6\u6001\u53d8\u66f4\u7684\u4fe1\u606f\uff0c\u901a\u8fc7dispatch\u6765\u6d3e\u53d1\u3002redux\u89c4\u5b9a\u4e86action\u5bf9\u8c61\u9700\u8981\u6709\u4e00\u4e2atype\u5c5e\u6027\uff0c\u6765\u4fdd\u8bc1action\u7684\u552f\u4e00\u6027\u3002\\n\\n\u9664\u6b64\u4e4b\u5916\uff0caction\u53ef\u4ee5\u643a\u5e26\u5176\u4ed6\u6570\u636e\u4fe1\u606f\uff0c\u8fd9\u4e9b\u6570\u636e\u4fe1\u606f\u7684\u5c5e\u6027\u5c31\u6ca1\u6709\u9650\u5236\u4e86\u3002\u6bd4\u5982\uff1a\\n\\n```js\\nconst action = {\\n\\ttype: \\"AAA\\",\\n\\tdata: {\\n\\t\\tname:\\"aaa\\"\\n\\t}\\n}\\n```\\n\\n\u4e00\u822c\u60c5\u51b5\u4e0b\uff0caction\u643a\u5e26\u7684\u4fe1\u606f\uff0c\u662f\u9875\u9762\u52a8\u6001\u8f93\u5165\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49action\u76f8\u5173\u7684\u51fd\u6570\uff1a\\n\\n```js\\nconst action = data=>({type:\\"AAA\\",data});\\n```\\n\\n\u4e4b\u540e\u5c31\u901a\u8fc7dispatch\u6765\u6d3e\u53d1action\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nstore.dispatch(action(908));\\n```\\n\\n\u7531\u6b64\u53ef\u4ee5\u770b\u51fa\uff0caction\u5c31\u662f\u63cf\u8ff0\u4e86\u4e00\u4e2a\u72b6\u6001\u53d8\u5316\uff0c\u8fd9\u4e2a\u72b6\u6001\u5305\u542b\u4e86type\u5c5e\u6027\u548c\u53d8\u5316\u7684\u4fe1\u606f\u3002\\n\\n\u7136\u800c\uff0c\u771f\u6b63\u5c06\u8fd9\u4e9b\u53d8\u5316\u8f6c\u4e3a\u6570\u636e\u72b6\u6001\u7684\u662freducer\u51fd\u6570\u3002reducer\u5fc5\u987b\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u6765\u4fdd\u8bc1\u6570\u636e\u53d8\u5316\u7684\u53ef\u9884\u6d4b\u6027\u3002\u6bd4\u5982\u73b0\u5728\u8981\u5b9a\u4e49\u4e00\u4e2a\u53d8\u66f4\u72b6\u6001\u7684\u51fd\u6570\uff1achangesState()\u3002\\n\\n```js\\nconst changesState = (prevState={},action)=>{\\n\\tswitch(action.type){\\n\\t\\tcase:\'AAA\':\\n\\t\\t\\treturn:action.data\\n\\t\\tdefault:\\n\\t\\t\\treturn prevState;\\n\\t}\\n}\\n```\\n\\n\u4e00\u822c\u60c5\u51b5\u4e0b\uff0creducer\u51fd\u6570\u4f1a\u5904\u7406\u591a\u4e86action\u3002\\n\\n\u8fd9\u5c31\u662fRedux\u57fa\u672c\u4f7f\u7528\u3002"},{"id":"Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6","metadata":{"permalink":"/react/Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6","source":"@site/react/react202310.md","title":"Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6","description":"\x3c!--","date":"2024-01-31T02:49:10.000Z","formattedDate":"2024\u5e741\u670831\u65e5","tags":[{"label":"react","permalink":"/react/tags/react"}],"readingTime":3.33,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":6,"slug":"Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6","title":"Redux\u7684\u7eaf\u51fd\u6570\u3001\u4e2d\u95f4\u4ef6","tags":["react"]},"prevItem":{"title":"Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5","permalink":"/react/Redux\u57fa\u672c\u4f7f\u7528\u548c\u5b9e\u8df5"}},"content":"\x3c!--\\n * @Author: duxinyues yongyuan253015@gmail.com\\n * @Date: 2023-10-14 13:20:58\\n * @LastEditors: duxinyues yongyuan253015@gmail.com\\n * @LastEditTime: 2023-10-14 13:20:59\\n * @FilePath: /blog/react/react202310.md\\n * @Description: \\n * Copyright (c) 2023 by ${duxinyues} email: ${yongyuan253015@gmail.com}, All Rights Reserved.\\n--\x3e\\n\\n\\n\u5f53\u6211\u4eec\u7684\u5e94\u7528\u968f\u7740\u4e1a\u52a1\u7684\u53d1\u5c55\uff0c\u53d8\u5f97\u8d8a\u6765\u8d8a\u590d\u6742\u7684\u65f6\u5019\uff0c\u7ec4\u4ef6\u4e4b\u95f4\u7684\u72b6\u6001\u4e5f\u662f\u8d8a\u6765\u8d8a\u590d\u6742\u3002\\n\\n## reducer\u51fd\u6570\\n\\n\u4e4b\u524d\u8bf4\u8fc7redux\u4e2d\u7684action\uff0c\u662f\u7528\u6765\u63cf\u8ff0\u4e00\u79cd\u53d8\u5316\u3002\u4f46\u662f\u5b8c\u6210\u53d8\u5316\u5e76\u4e14\u751f\u8fb0\u65b0\u7684\u6570\u636e\u6570\u636e\u72b6\u6001\u7684\u662freducer\u65b9\u6cd5\u3002\\n\\nreducer\u65b9\u6cd5\uff0c\u5fc5\u987b\u662f\u7eaf\u51fd\u6570\uff0c\u624d\u80fd\u4fdd\u8bc1\u6570\u636e\u53d8\u5316\u7684\u53ef\u9884\u6d4b\u6027\u3002\u4e5f\u5c31\u662f\u8bf4\u6267\u884c\u6bcf\u4e00\u6b65\u53d8\u5316\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u9884\u6d4b\u6570\u636e\u7684\u7ed3\u679c\u3002\u6bd4\u5982\uff1a\\n\\n```javascript\\nexport default function menuReducer(\\n  state = {\\n    menuState,\\n    isCollapse: false,\\n  },\\n  action: any\\n) {\\n  switch (action.type) {\\n    case types.MENU_COLLAPSES:\\n      return {\\n        ...state,\\n        isCollapse: action.payload,\\n      };\\n    default:\\n      return { ...state };\\n  }\\n}\\n```\\n\\n\u8fd9reducer\u51fd\u6570\uff0c\u662f\u63a7\u5236\u83dc\u5355\u7684\u6536\u7f29\u72b6\u6001\u7684\uff0c\u5b83\u5bf9\u5e94\u7684action\uff0c\u6211\u662f\u8fd9\u6837\u5199\u7684\uff1a\\n\\n```javascript\\nimport * as types from \\"@/store/types\\";\\n\\nexport const changeCollapse = (isCollapse: boolean) =>({\\n  type: types.MENU_COLLAPSES,\\n  payload: isCollapse,\\n});\\n\\n```\\n\\n\\n\u6309\u94ae\u7ec4\u4ef6\u7684\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```javascript\\nimport { MenuFoldOutlined, MenuUnfoldOutlined } from \\"@ant-design/icons\\";\\nimport { connect } from \\"react-redux\\";\\nimport { changeCollapse } from \\"@/store/redux/menu/action\\";\\n\\nconst CollapsesIcon = (props: any) => {\\n  const { isCollapses, changeCollapse } = props;\\n  return (\\n    <div\\n      className=\\"collapsed\\"\\n      onClick={() => {\\n        changeCollapse(!isCollapses)\\n      }}\\n    >\\n      {isCollapses ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}\\n    </div>\\n  );\\n};\\nconst mapStateToProps = (state: any) => {\\n  return { isCollapses: state.menus.isCollapse };\\n};\\nconst mapDispatchToProps = { changeCollapse };\\nexport default connect(mapStateToProps, mapDispatchToProps)(CollapsesIcon);\\n\\n```\\n\\n\u5728\u4e00\u4e2a\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u4f7f\u7528\u4e00\u4e2aaction\u6765\u63cf\u8ff0\u6240\u6709\u7684\u53d8\u5316\uff0c\u8fd9\u6837\u4e0d\u5229\u4e8e\u7ef4\u62a4\u3002\u4e00\u822c\u60c5\u51b5\u662f\u4e00\u4e2aaction\u63cf\u8ff0\u4e00\u79cd\u53d8\u5316\uff0c\u540c\u65f6\u4e5f\u4f1a\u5b9a\u4e49\u5bf9\u5e94\u7684reducer\u51fd\u6570\u3002\\n\\nredux\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177\u51fd\u6570combineReducers\uff0c\u6765\u5408\u5e76\u6240\u6709\u7684reducer\u51fd\u6570\u3002\u6bd4\u5982\uff1a\\n\\n```javascript\\nimport { combineReducers } from \\"redux\\";\\nimport menuReducer from \\"../redux/menu/menu\\";\\nimport globalReducer from \\"../redux/global/reducer\\";\\nimport { auth } from \\"../redux/auth\\";\\nconst reducers = combineReducers({\\n    menus: menuReducer,\\n    global:globalReducer,\\n    auth\\n});\\n\\nexport default reducers\\n```\\n\\ncombineReducers\u51fd\u6570\u63a5\u6536\u4e00\u4e2aObject\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u5305\u542b\u4e86\u9875\u9762\u7684\u6570\u636e\u72b6\u6001\u3001\u5df2\u7ecf\u72b6\u6001\u6570\u636e\u548creducer\u51fd\u6570\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\\n\\n\u8fd9\u5c31\u662fredux\u7684\u7eaf\u51fd\u6570reducer\u3002\\n\\n## \u4e2d\u95f4\u4ef6\\nredux\u4e2d\u95f4\u4ef6\u5c31\u662f\u5728\u6d3e\u53d1action\u548c\u6267\u884creducer\u4e4b\u95f4\uff0c\u6dfb\u52a0\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684\u529f\u80fd\u3002\\n\\n\u6bd4\u5982\u8bb0\u5f55\u65e5\u5fd7\u3001\u8c03\u7528\u5f02\u6b65\u63a5\u53e3\u6216\u8005\u8def\u7531\u7b49\u7b49\u3002\\n\\nredux\u662f\u901a\u8fc7applyMiddleware\u65b9\u6cd5\u6765\u63a5\u5165\u4e2d\u95f4\u4ef6\u7684\uff0c\u6bd4\u5982\uff1a\\n \\n\\n```javascript\\nlet store = legacy_createStore(configStore, composeEnhancers(\\n  applyMiddleware(...middleware, reduxPromise)\\n));\\n```\\n\\n\u6bd4\u5982\u73b0\u5728\u5728\u5f00\u53d1\u73af\u5883\u4e2d\uff0c\u60f3\u8bb0\u5f55\u4e00\u4e0b\u72b6\u6001\u6570\u636e\u53d8\u5316\u7684\u65e5\u5fd7\uff0c\u53ef\u4ee5\u4f7f\u7528redux-logger\uff1a\\n\\n```javascript\\nimport { createLogger } from \'redux-logger\';\\nconst logger = createLogger();\\nstore = legacy_createStore(configStore, composeEnhancers(\\n  applyMiddleware(...middleware, reduxPromise,logger)\\n));\\n```\\n\\n\u8fd9\u6837\u5c31\u662f\u8f7b\u677e\u7684\u67e5\u770b\u72b6\u6001\u6570\u636e\u7684\u53d8\u5316\u8bb0\u5f55\u3002\\n\\n\u4f46\u662f\uff0c\u9700\u8981\u7559\u610f\u4e00\u4e0b\uff0credux-logger\u9700\u8981\u653e\u5728\u6240\u6709\u4e2d\u95f4\u4ef6\u7684\u6700\u540e\u9762\uff0c\u624d\u80fd\u51c6\u786e\u6253\u5370\u65e5\u5fd7\u54e6\u3002"}]}')}}]);